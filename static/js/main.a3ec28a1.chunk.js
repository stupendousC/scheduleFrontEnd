(this.webpackJsonpscheduleplusplus=this.webpackJsonpscheduleplusplus||[]).push([[0],{112:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(23),i=n.n(c),r=(n(93),n(29)),o=n(30),l=n(34),d=n(33),h=n(5),j=n.n(h),u=(n(112),n(56),n(7)),b=(n(113),n(17)),O=n(87),f=function(){return{googleId:sessionStorage.getItem("googleId"),googleAccessToken:sessionStorage.getItem("googleAccessToken")}},m=function(e){var t=new Date(e+" 00:00-0800");return new Date(t)},p=function(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n<10&&(n="0"+n.toString()),a<10&&(a="0"+a.toString()),"".concat(t,"-").concat(n,"-").concat(a)},g=function(e){var t;t="string"===typeof e?m(e):e;var n=new Array(7);return n[0]="Sun",n[1]="Mon",n[2]="Tues",n[3]="Wed",n[4]="Thurs",n[5]="Fri",n[6]="Sat",n[t.getDay()]},x=function(e){var t=parseInt(e.slice(0,2));return t<12?"0"===e[0]?e.slice(1,5)+" A.M.":e.slice(0,5)+" A.M.":(t-=12)+e.slice(2,5)+" P.M."},S=function(e){var t=m(e),n=t.toLocaleString("default",{month:"short"}),a=t.getUTCDate(),s=t.getFullYear();return"".concat(n," ").concat(a,", ").concat(s)},v=function(e){return e.sort((function(e,t){return t.day_off<e.day_off?1:-1}))},E=function(e){return e.sort((function(e,t){return t.shift_date<=e.shift_date?1:-1}))},N=function(e){return p(new Date)>e},_=function(e){if(!e)return!1;if(e.length<10||e.length>14)return!1;if(10===e.length||11===e.length)return y(e);if(12===e.length){if("-"!==e[3]||"-"!==e[7])return!1;var t=e.slice(0,3),n=e.slice(4,7),a=e.slice(8,12);return C([t,n,a])}if(14===e.length){if("-"!==e[1]||"-"!==e[5]||"-"!==e[9])return!1;var s=e[0],c=e.slice(2,5),i=e.slice(6,9),r=e.slice(10,14);return C([s,c,i,r])}},y=function(e){for(var t=e;"0"===t[0]&&t.length>1;)t=t.slice(1,t.length);return t===parseInt(e).toString()},C=function(e){var t,n=Object(b.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!y(a))return!1}}catch(s){n.e(s)}finally{n.f()}return!0},T=function e(t){return 10===t.length?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6,10)):11===t.length?e(t.slice(1,11)):t},A=function(e){if(13===e.length){if("("!==e[0])return null;if(")"!==e[4])return null;if("-"!==e[8])return null;var t=e.slice(1,4),n=e.slice(5,8),a=e.slice(9,13);return C([t,n,a])?"".concat(t,"-").concat(n,"-").concat(a):null}return null},D=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},I=function(e){return e.sort((function(e,t){return t.id<=e.id?1:-1}))},R=n(12),L=n.p+"static/media/SPPbanner2.1e0aad4c.png",w=n(83),P=n.n(w),k=n(42),U=n(27),H=n(0),M=function(e){var t=e.authenticatedRole,n=e.googleAuthCallback,s=e.demoLoginCallback,c=e.logoutCallback,i=Object(a.useState)(""),r=Object(R.a)(i,2),o=r[0],l=r[1],d=Object(a.useState)(!1),h=Object(R.a)(d,2),b=h[0],O=h[1],m=function(){return O(!1)},p=function(){return O(!0)},g=function(e){var t=e.profileObj.googleId;sessionStorage.setItem("googleId",t),n()},x=function(e){console.log("GoogleLogin failed:"),console.log(e)},S=function(){var e=function(e){s(e)};return Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{children:"[NOTICE] Back end is no longer deployed, so you're not going to see any data populated (nor will any persist) once you login."}),Object(H.jsx)("button",{onClick:function(){e("ADMIN")},children:"Bypass Google, I just want to poke around as an ADMIN"}),Object(H.jsx)("br",{}),Object(H.jsx)("button",{onClick:function(){e("EMPLOYEE")},children:"Bypass Google, I just want to poke around as an EMPLOYEE"})]})},v=function(){return Object(H.jsx)("section",{className:"btn btn-google",children:Object(H.jsx)(P.a,{clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_CLIENT_ID,buttonText:"LOGIN WITH GOOGLE",onSuccess:g,onFailure:x,cookiePolicy:"single_host_origin"})})};return Object(H.jsxs)("section",{children:[Object(H.jsxs)("section",{className:"loginBanner-section text-centered",children:[Object(H.jsx)(U.b,{to:"/",children:Object(H.jsx)("img",{src:L,alt:"sppBannerLogo",className:"img-90"})}),t?function(){var e=sessionStorage.getItem("username");return"ADMIN"===t?Object(H.jsxs)("section",{className:"dashboard-buttons_container",children:[Object(H.jsx)("button",{className:"btn btn-success dashboard-buttons",children:Object(H.jsxs)(U.b,{to:"/adminDash",children:[e,"'s Dashboard"]})}),Object(H.jsx)("button",{className:"btn btn-danger dashboard-buttons",onClick:c,children:Object(H.jsx)(U.b,{to:"/",children:"LOGOUT"})})]}):"EMPLOYEE"===t?Object(H.jsxs)("section",{className:"dashboard-buttons_container",children:[Object(H.jsx)("button",{className:"btn btn-success dashboard-buttons",children:Object(H.jsxs)(U.b,{to:"/employeeDash",children:[e,"'s Dashboard"]})}),Object(H.jsx)("button",{className:"btn btn-danger dashboard-buttons",onClick:c,children:Object(H.jsx)(U.b,{to:"/",children:"LOGOUT"})})]}):Object(H.jsxs)("section",{className:"dashboard-buttons_container",children:[Object(H.jsx)("button",{className:"btn btn-warning dashboard-buttons",onClick:p,children:"First time logging in?  Click to activate account!"}),Object(H.jsx)("button",{className:"btn btn-danger dashboard-buttons",onClick:c,children:Object(H.jsx)(U.b,{to:"/",children:"LOGOUT"})})]})}():Object(H.jsxs)("div",{children:[v(),S()]})]}),Object(H.jsxs)(k.a,{show:b,onHide:m,children:[Object(H.jsx)(k.a.Header,{closeButton:!0,children:Object(H.jsx)(k.a.Title,{children:"Welcome to Schedule Plus Plus!"})}),Object(H.jsxs)(k.a.Body,{children:["Please copy and paste your unique verification id (uuid), including the dashes.",Object(H.jsxs)("form",{children:[Object(H.jsx)("input",{type:"text",className:"form-control margin-top-1rem",onChange:function(e){l(e.target.value)},placeholder:"Example: 12345678-abcd-abcd-abcd-1234abcd1234"}),Object(H.jsx)("section",{className:"centered-children-per-row_container",children:Object(H.jsx)("button",{className:"btn btn-primary margin-top-1rem",onClick:function(e){e.preventDefault(),m();var t={googleId:sessionStorage.getItem("googleId"),uuid:o},a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LOGIN+"/firstTime",s=f();j.a.post(a,t,{headers:s}).then((function(e){var t=Object.keys(e.data)[0];"ADMIN"===t||"EMPLOYEE"===t?n():u.b.error("Invalid uuid verification code, please double check and try again")})).catch((function(e){return u.b.error(e.message)}))},children:"Log in!"})})]})]})]})]})},F=n.p+"static/media/redCrossFlag.88af6776.svg";function K(){return Object(H.jsxs)("section",{className:"footer",children:[Object(H.jsx)("img",{src:F,alt:"redCrossFlag",className:"img-5"}),Object(H.jsx)("a",{href:"https://github.com/stupendousC",target:"_blank",rel:"noopener noreferrer",children:" Made by: Caroline Wu "}),Object(H.jsx)("img",{src:F,alt:"redCrossFlag",className:"img-5"}),Object(H.jsx)("p",{className:"fine-print",children:"All icons from www.freeicons.io"})]})}var W=n(86),B=n(10),G=n(50),Y=n.n(G),V=function(e){var t=e.basicShiftsInfo,n=(e.dateStr,e.showColorBasedOnDay);return Object(H.jsx)("section",{className:n(),children:t&&t!==[]&&0!==t.length?Object(H.jsxs)("section",{children:[Object(H.jsxs)("section",{className:"section-4-col padding-top-1rem text-centered",children:[Object(H.jsx)("h5",{children:"CLIENT"}),Object(H.jsx)("h5",{children:"EMPLOYEE"}),Object(H.jsx)("h5",{children:"START"}),Object(H.jsx)("h5",{children:"END"})]}),Object(H.jsx)("section",{className:"text-centered padding-bottom-1rem",children:t.map((function(e){return Object(H.jsxs)("section",{className:"section-4-col",children:[Object(H.jsx)("section",{children:e.client.name}),Object(H.jsx)("section",{children:e.employee?e.employee.name:""}),Object(H.jsx)("section",{children:x(e.start_time)}),Object(H.jsx)("section",{children:x(e.end_time)})]},e.id)}))})]}):Object(H.jsx)("h3",{className:"text-centered padding-all-1rem",children:"No shifts scheduled"})})},J=function(e){var t=e.daySpotlight,n=e.allClients,s=e.availEmpsOfDay,c=e.updateAllShiftsCallback,i=e.textEmployeesCallback,r=e.showColorBasedOnDay,o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_SHIFTS,l=Object(a.useState)(null),d=Object(R.a)(l,2),h=d[0],b=d[1],O="09:00:00",m="17:00:00",p=Object(a.useState)(O),g=Object(R.a)(p,2),x=g[0],v=g[1],E=Object(a.useState)(m),_=Object(R.a)(E,2),y=_[0],C=_[1],T=function(){return!(N(t)||!h||y<=x)},A=function(e){"startTime"===e.target.id?v(e.target.value):"endTime"===e.target.id&&C(e.target.value)};return Object(H.jsxs)("section",{className:r(),children:[Object(H.jsx)("h1",{className:"text-centered",children:S(t)}),Object(H.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=n.find((function(e){return e.id===h})),s={shift_date:t,start_time:x,end_time:y,client:a,client_id:h},r=null,l=f();j.a.post(o,s,{headers:l}).then((function(e){r=e.data,c(),i(r)})).catch((function(e){return u.b.error("ERROR: Can't make new shift: ".concat(e.message))}))},className:"px-4 py-3",children:[Object(H.jsxs)("section",{className:"form-group",children:[Object(H.jsx)("label",{children:"Client"}),Object(H.jsxs)("select",{className:"form-control",onChange:function(e){"-- Select --"===e.target.value?b(null):b(parseInt(e.target.value))},children:[Object(H.jsx)("option",{defaultValue:!0,children:"-- Select --"}),n.map((function(e){return Object(H.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(H.jsx)("label",{children:"Start time"}),Object(H.jsx)("input",{id:"startTime",onChange:A,className:"form-control",type:"time",defaultValue:O}),Object(H.jsx)("label",{children:"End time"}),Object(H.jsx)("input",{id:"endTime",onChange:A,className:"form-control",type:"time",defaultValue:m})]}),T()?null:function(){var e=function(){var e=[];return N(t)&&e.push("Date cannot be in the past"),h||e.push("Please select a client before submitting form"),y<=x&&e.push("Start time must be before end time"),e}().map((function(e,t){return Object(H.jsx)("li",{className:"centered-text",children:e},t)}));return Object(H.jsx)("ul",{className:"centered-children-per-row_container",children:e})}(),Object(H.jsxs)("section",{className:"centered-children-per-row_container",children:[Object(H.jsx)("input",{type:"submit",className:"btn btn-primary",value:0===s.length?"No one is available -> MAKE NEW SHIFT anyway":"MAKE NEW SHIFT & NOTIFY ALL THOSE AVAILABLE",disabled:!T()}),Object(H.jsx)("li",{className:"fine-print centered-text",children:"New shift will be visible on employee dashboards, open on a first-come-first-served basis"}),Object(H.jsx)("li",{className:"fine-print centered-text",children:"Texts will also be sent to all those available, with valid phone numbers in their record"})]})]})]})},q=function(e){var t=e.allShifts,n=e.allClients,s=e.updateAllShiftsCallback,c=e.textEmployeesCallback,i=p(new Date),r=Object(a.useState)(i),o=Object(R.a)(r,2),l=o[0],d=o[1],h=Object(a.useState)("LOADING"),O=Object(R.a)(h,2),g=O[0],x=O[1],v=Object(a.useState)("LOADING"),E=Object(R.a)(v,2),_=E[0],y=E[1],C=function(e){var n,a=[],s=Object(b.a)(t);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.shift_date===e)a.push(c);else if(c.shift_date>e)break}}catch(i){s.e(i)}finally{s.f()}x(a)},T=function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GET_AVAIL_EMPS_FOR_DAY+"/".concat(e),n=f();j.a.get(t,{headers:n}).then((function(e){return y(e.data)})).catch((function(e){return u.b.error(e.message)}))},A=function(){return l===i?"accordion-toggle_button_gold":0===_.length?"accordion-toggle_button_red":N(l)?"accordion-toggle_button_gray":"accordion-toggle_button"},D=function(){return l===p(new Date)?"lightgold-bg":N(l)?"lightgray-bg":0===_.length?"lightred-bg":"lightblue-bg"},I=function(){return _.map((function(e){return Object(H.jsxs)("section",{className:"section-3-col text-centered",children:[Object(H.jsx)("section",{children:e.name}),Object(H.jsx)("section",{children:e.phone}),Object(H.jsx)("section",{children:e.email})]},e.id)}))};return"LOADING"===g&&C(l),"LOADING"===_&&T(l),"LOADING"===g&&"LOADING"===_?Object(H.jsx)("section",{children:"LOADING"}):Object(H.jsxs)("section",{children:[Object(H.jsx)("section",{className:"calendar-container",children:Object(H.jsx)(Y.a,{tileContent:function(e){var t=e.date,n=e.view,a=" - ",s="",c=p(t);if(l===c&&0===_.length&&(a="\ud83d\ude31",s="tile-no-workers"),N(c)?(a=" x ",s="tile-past"):c===i&&(a="TODAY",s="tile-today"),"month"===n)return Object(H.jsx)("section",{className:s,children:a})},onChange:function(e){var t=p(e);C(t),T(t),d(t)},value:m(l)})}),Object(H.jsxs)(B.a,{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"newShift",className:A(),children:Object(H.jsx)("section",{children:Object(H.jsx)("section",{children:"\u25bc MAKE A NEW SHIFT"})})}),Object(H.jsx)(B.a.Collapse,{eventKey:"newShift",children:Object(H.jsx)(J,{daySpotlight:l,allClients:n,availEmpsOfDay:_,updateAllShiftsCallback:s,textEmployeesCallback:function(e){c(e,_)},showColorBasedOnDay:D})})]}),Object(H.jsxs)(B.a,{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"availEmpList",className:A(),children:Object(H.jsx)("section",{children:Object(H.jsxs)("section",{children:["\u25bc ","LOADING"===_?"Loading":_.length," AVAILABLE EMPLOYEES FOR ",S(l)]})})}),Object(H.jsx)(B.a.Collapse,{eventKey:"availEmpList",children:N(l)?Object(H.jsx)("section",{className:D()+" text-centered",children:" This day is in the past..."}):"LOADING"===_?Object(H.jsx)("section",{className:D()+" text-centered",children:"Loading..."}):0===_.length?Object(H.jsx)("section",{className:D()+" text-centered",children:"No one is available!"}):Object(H.jsxs)("section",{className:"padding-all-1rem ".concat(D()),children:[Object(H.jsxs)("section",{className:"section-3-col text-centered",children:[Object(H.jsx)("h5",{children:"EMPLOYEE"}),Object(H.jsx)("h5",{children:"PHONE"}),Object(H.jsx)("h5",{children:"EMAIL"})]}),I()]})})]}),Object(H.jsxs)(B.a,{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"dayAgenda",className:A(),children:Object(H.jsx)("section",{children:Object(H.jsxs)("section",{children:["\u25bcAGENDA FOR ",S(l)]})})}),Object(H.jsx)(B.a.Collapse,{eventKey:"dayAgenda",children:Object(H.jsx)(V,{basicShiftsInfo:g,dateStr:l,showColorBasedOnDay:D})})]})]})},z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).setPastVsCurrentShifts=function(){var t,n=[],a=[],s=Object(b.a)(e.props.allShifts);try{for(s.s();!(t=s.n()).done;){var c=t.value;N(c.shift_date)?a.push(c):n.push(c)}}catch(i){s.e(i)}finally{s.f()}e.setState({pastShifts:a,currentShifts:n})},e.showShiftsTable=function(t,n){var a=null,s=null;return"PAST"===n?(a="gray-bg",s="lightgray-bg"):"CURRENT"===n&&(a="blue-bg",s="lightblue-bg"),0===t.length?Object(H.jsx)("section",{className:"text-centered ".concat(s),children:"No shifts"}):Object(H.jsx)("section",{children:t.map((function(t){return Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showInfo",className:"accordion-toggle_button ".concat(a),children:Object(H.jsxs)("section",{className:"section-4-col",children:[Object(H.jsxs)("section",{children:["\u25bc #",t.id]}),Object(H.jsx)("section",{children:S(t.shift_date)}),Object(H.jsx)("section",{children:t.client.name}),Object(H.jsx)("section",{children:"CURRENT"===n?e.showEmpNameOrButton(t):null})]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showInfo",children:Object(H.jsx)("section",{children:e.showWholeShiftCard(t,n,s)})})]})},t.id)}))})},e.showEmpNameOrButton=function(e){return e.employee?e.employee.name:Object(H.jsx)("section",{className:"fake-btn",children:"Find employees"})},e.showWholeShiftCard=function(t,n,a){var s=t.client;return Object(H.jsxs)("section",{children:[Object(H.jsxs)("section",{className:"card-shift centered-children-per-row_container ".concat(a),children:[Object(H.jsx)("p",{children:"DATE"}),Object(H.jsx)("p",{children:t.shift_date}),Object(H.jsx)("p",{children:"START"}),Object(H.jsx)("p",{children:x(t.start_time)}),Object(H.jsx)("p",{children:"END"}),Object(H.jsx)("p",{children:x(t.end_time)})]}),Object(H.jsxs)("section",{className:"card-client centered-children-per-row_container",children:[Object(H.jsx)("p",{children:"CLIENT"}),s.name?Object(H.jsx)("p",{children:s.name}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"PHONE"}),s.phone?Object(H.jsx)("p",{children:s.phone}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"EMAIL"}),s.email?Object(H.jsx)("p",{children:s.email}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"ADDRESS"}),s.address?Object(H.jsx)("p",{children:s.address}):Object(H.jsx)("p",{children:"MISSING"})]}),Object(H.jsx)("section",{children:e.showEmployeeCardSection(t,n,a)})]})},e.showEmployeeCardSection=function(t,n,a){return"PAST"===n?Object(H.jsx)("section",{className:"".concat(a," text-centered"),children:"In the past"}):"CURRENT"===n?t.employee?e.showEmpInCard(t,a):e.showAvailEmpsInCard(t,a):void 0},e.showEmpInCard=function(e,t){var n=e.employee;return Object(H.jsxs)("section",{className:"card-employee ".concat(t),children:[Object(H.jsx)("p",{children:"EMPLOYEE"}),n.name?Object(H.jsx)("p",{children:n.name}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"PHONE"}),n.phone?Object(H.jsx)("p",{children:n.phone}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"EMAIL"}),n.email?Object(H.jsx)("p",{children:n.email}):Object(H.jsx)("p",{children:"MISSING"}),Object(H.jsx)("p",{children:"ADDRESS"}),n.address?Object(H.jsx)("p",{children:n.address}):Object(H.jsx)("p",{children:"MISSING"})]})},e.showAvailEmpsInCard=function(t){if("LOADING"===e.state.availEmployeesByShiftId)return Object(H.jsx)("section",{className:"card-employee lightblue-bg",children:"Loading..."});var n=e.state.availEmployeesByShiftId[t.id];if(0===n.length)return Object(H.jsx)("section",{className:"card-employee red-bg",children:"NO EMPLOYEES AVAILABLE!"});var a=Array.from(n),s=a.length;return Object(H.jsxs)("section",{className:"lightblue-bg",children:[Object(H.jsxs)("button",{onClick:function(){e.props.textEmployeesCallback(t,n)},className:"btn btn-primary margin-left-1rem",children:["TEXT ALL ",s," AVAILABLE EMPLOYEES"]}),e.rowsOfEmps(a)]})},e.rowsOfEmps=function(e){return e.map((function(e,t){return Object(H.jsxs)("section",{className:"card-employee lightblue-bg",children:[Object(H.jsx)("section",{children:e.name}),Object(H.jsx)("section",{children:e.phone})]},e.id)}))},e.state={availEmployeesByShiftId:"LOADING",pastShifts:[],currentShifts:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t={},n=this.props.allShifts.filter((function(e){return!e.employee})),a=f(),s=n.map((function(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GET_AVAIL_EMPS_FOR_SHIFT+"/".concat(e.id);return j.a.get(t,{headers:a})}));j.a.all(s).then(j.a.spread((function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];for(var i=0;i<n.length;i++){var r=n[i].id;t[r]=s[i].data}e.setState({availEmployeesByShiftId:t})}))).catch((function(e){return u.b.error("ERROR loading info from database: ".concat(e))})),this.setPastVsCurrentShifts()}},{key:"render",value:function(){return Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered margin-all-1rem",children:"CURRENT SHIFTS"}),this.showShiftsTable(this.state.currentShifts,"CURRENT"),Object(H.jsx)("h1",{className:"text-centered margin-all-1rem",children:"PAST SHIFTS"}),this.showShiftsTable(this.state.pastShifts,"PAST")]})}}]),n}(s.a.Component),X=function(e){var t=e.undo,n=e.closeToast,a=e.message;return Object(H.jsxs)("h3",{children:[a,Object(H.jsx)("button",{onClick:function(){t(),n()},className:"btn btn-primary",children:"UNDO"})]})},Z=function(e){var t=e.personType,s=e.peopleList,c=e.URL_endpoint,i=e.setStateKey,r=e.updatePeopleListCB,o=Object(a.useState)(null),l=Object(R.a)(o,2),d=l[0],h=l[1],b=Object(a.useState)(!1),O=Object(R.a)(b,2),m=O[0],p=O[1],g=Object(a.useState)(null),x=Object(R.a)(g,2),S=x[0],v=x[1],E=Object(a.useState)({name:null,phone:null,email:null,address:null,active:!0}),N=Object(R.a)(E,2),y=N[0],C=(N[1],Object(a.useState)([])),I=Object(R.a)(C,2),L=I[0],w=I[1],P=Object(a.useState)([]),k=Object(R.a)(P,2),U=k[0],M=k[1],F=null,K=f(),W=n(82),G=function(e){return!0===m?Object(H.jsx)("form",{className:"margin-all-1rem",children:Object(H.jsxs)("fieldset",{children:[Object(H.jsxs)("section",{className:"form-group",children:[Object(H.jsx)("label",{children:"NAME"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:e.name,onChange:Q}),Object(H.jsx)("label",{children:"ADDRESS"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"address",placeholder:e.address,onChange:Q}),Object(H.jsx)("label",{children:"PHONE"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"phone",placeholder:e.phone,onChange:Q}),Object(H.jsx)("label",{children:"EMAIL"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"email",placeholder:e.email,onChange:Q})]}),Object(H.jsxs)("section",{className:"margin-all-1rem",children:[U===[]?null:q(U),Object(H.jsx)("button",{onClick:ee,className:"btn btn-primary",children:"UPDATE"})]})]})}):Object(H.jsxs)("section",{className:"card-person lightblue-bg",children:[Object(H.jsx)("p",{children:"ID"}),Object(H.jsx)("p",{children:e.id}),Object(H.jsx)("p",{children:"NAME"}),Object(H.jsx)("p",{children:e.name}),Object(H.jsx)("p",{children:"PHONE"}),Object(H.jsx)("p",{children:e.phone}),Object(H.jsx)("p",{children:"EMAIL"}),Object(H.jsx)("p",{children:e.email}),Object(H.jsx)("p",{children:"ADDRESS"}),Object(H.jsx)("p",{children:e.address}),Object(H.jsx)("p",{children:"UUID (for 1st time login)"}),Object(H.jsx)("p",{children:e.uuid})]})},Y=function(e){y[e.target.name]=e.target.value},V=function(e){e.preventDefault(),J(y,w)&&j.a.post(c,y,{headers:K}).then((function(e){u.b.success("".concat(y.name," added successfully")),r(i,c)})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))},J=function(e,t){var n=[];if(""!==e.name&&e.name||n.push("Name cannot be blank"),e.phone&&""!==e.phone)if(_(e.phone)){var a=T(e.phone);e.phone=a}else{var s=A(e.phone);s?e.phone=s:n.push("Phone number format invalid")}return e.email&&""!==e.email&&(D(e.email)||n.push("Email invalid")),t(n),0===n.length},q=function(e){var t=e.map((function(e,t){return Object(H.jsx)("li",{className:"centered-text",children:e},t)}));return Object(H.jsx)("ul",{className:"centered-children-per-row_container",children:t})},z=function(e){d===e?h(""):(h(e),M([]))},Z=function(e,t){var n=t[e];z(n),p(!1)},$=function(e,t){var n=t[e];z(n),p(!0);var a=JSON.parse(JSON.stringify(n));v(a)},Q=function(e){S[e.target.name]=e.target.value,v(S)},ee=function(e){e.preventDefault(),J(S,M)&&j.a.put("".concat(c,"/").concat(S.id),S,{headers:K}).then((function(e){u.b.success("".concat(S.name," updated successfully"));s.map((function(t){return t.id===S.id?e.data:t}));r(i,c)})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))},te=function(e){h(""),F=e,Object(u.b)(Object(H.jsx)(X,{undo:ne,message:"Deleting ".concat(e.name)}),{onClose:ae})},ne=function(){F=null},ae=function(){F&&j.a.delete(c+"/"+F.id,{headers:K}).then((function(e){r(i,c)})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))};return Object(H.jsxs)("section",{children:[Object(H.jsxs)("h1",{className:"text-centered margin-all-1rem",children:["ALL ",t.toUpperCase(),"S"]}),function(){var e=W();return y.uuid=e,Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showForm",className:"accordion-toggle_button gold-bg",children:Object(H.jsxs)("section",{className:"margin-all-1rem capitalize",children:["\u25bc add new ",t," \u25bc"]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showForm",children:Object(H.jsx)("form",{className:"margin-all-1rem lightgold-bg",children:Object(H.jsxs)("fieldset",{children:[Object(H.jsxs)("section",{className:"margin-all-1rem form-group",children:[Object(H.jsx)("label",{children:"NAME"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"name",onChange:Y}),Object(H.jsx)("label",{children:"ADDRESS"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"address",onChange:Y}),Object(H.jsx)("label",{children:"PHONE"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"phone",onChange:Y}),Object(H.jsx)("label",{children:"EMAIL"}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"email",onChange:Y}),Object(H.jsx)("label",{children:"UUID"}),Object(H.jsx)("input",{type:"text",className:"form-control",disabled:!0,name:"uuid",placeholder:y.uuid})]}),Object(H.jsxs)("section",{className:"centered-children-per-row_container margin-all-1rem",children:[L===[]?null:q(L),Object(H.jsx)("button",{onClick:V,className:"btn btn-primary",children:"ADD"})]})]})})})]})})}(),function(e){return e.map((function(t,n){return Object(H.jsxs)("section",{className:"margin-all-1rem",children:[Object(H.jsxs)("section",{className:"peopleTable",children:[Object(H.jsx)("section",{children:t.name}),Object(H.jsx)("section",{children:Object(H.jsx)("button",{onClick:function(){return Z(n,e)},className:"btn btn-primary",children:"Info"})}),Object(H.jsx)("section",{children:Object(H.jsx)("button",{onClick:function(){return $(n,e)},className:"btn btn-warning",children:"Update"})}),Object(H.jsx)("section",{children:Object(H.jsx)("button",{onClick:function(){return te(t)},className:"btn btn-danger",children:"Deactivate"})})]}),Object(H.jsx)("section",{children:d===t?G(t):null})]},n)}))}(s)]})},$=n(143),Q=n(142),ee=n.p+"static/media/alarmClock.b26c6446.svg",te=n.p+"static/media/stopwatch.c80843f2.svg",ne=n.p+"static/media/warning.5346a599.svg",ae=n.p+"static/media/questionBubble.476485a4.svg",se=n.p+"static/media/comboLock.ae4f774a.svg";function ce(e){var t=e.icon,n=e.message;return Object(H.jsxs)("section",{className:"margin-all-1rem",children:[Object(H.jsx)("h1",{className:"text-centered margin-all-1rem",children:n}),"alarm"===t?Object(H.jsx)("img",{src:ee,alt:"alarm clock",className:"homepage-logo"}):"stopwatch"===t?Object(H.jsx)("img",{src:te,alt:"stopwatch",className:"homepage-logo"}):"warning"===t?Object(H.jsx)("img",{src:ne,alt:"warning sign",className:"homepage-logo"}):"lock"===t?Object(H.jsx)("img",{src:se,alt:"lock",className:"homepage-logo"}):Object(H.jsx)("img",{src:ae,alt:"man with question bubble above head",className:"homepage-logo"})]})}var ie=n(82),re=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_EMPS,oe=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_CLIENTS,le=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_ADMINS,de=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_SHIFTS,he=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALL_EMPS,je=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TEXT_EMPS,ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).getAllEmpsDB=function(e){return j.a.get(re,{headers:e})},e.getAllClientsDB=function(e){return j.a.get(oe,{headers:e})},e.getAllAdminsDB=function(e){return j.a.get(le,{headers:e})},e.getAllShiftsDB=function(e){return j.a.get(de,{headers:e})},e.getAllUnavailsDB=function(e){return j.a.get(he,{headers:e})},e.setShowCategory=function(t){return e.setState({show:t})},e.showChosenCategory=function(){var t=e.state.show;return"calendar"===t?e.showCalendar():"admins"===t?e.showAllAdmins():"employees"===t?e.showAllEmployees():"clients"===t?e.showAllClients():"shifts"===t?e.showAllShifts():void 0},e.showCalendar=function(){return Object(H.jsx)(q,{allClients:e.state.allClients,allShifts:e.state.allShifts,updateAllShiftsCallback:e.updateAllShifts,textEmployeesCallback:e.textEmployees})},e.showAllShifts=function(){return Object(H.jsx)(z,{allShifts:e.state.allShifts,textEmployeesCallback:e.textEmployees})},e.showAllEmployees=function(){return Object(H.jsx)(Z,{personType:"employee",peopleList:e.state.allEmployees,URL_endpoint:re,setStateKey:"allEmployees",updatePeopleListCB:e.updatePeopleList})},e.showAllAdmins=function(){return Object(H.jsx)(Z,{personType:"admin",peopleList:e.state.allAdmins,URL_endpoint:le,setStateKey:"allAdmins",updatePeopleListCB:e.updatePeopleList})},e.showAllClients=function(){return Object(H.jsx)(Z,{personType:"client",peopleList:e.state.allClients,URL_endpoint:oe,setStateKey:"allClients",updatePeopleListCB:e.updatePeopleList})},e.updatePeopleList=function(t,n){var a=f();j.a.get(n,{headers:a}).then((function(n){return e.setState(Object(W.a)({},t,n.data))})).catch((function(e){return u.b.error("ERROR downloading list: ".concat(e.message))}))},e.updateAllShifts=function(){var t=f();j.a.get(de,{headers:t}).then((function(t){var n=E(t.data);e.setState({allShifts:n})})).catch((function(e){return u.b.error(e.message)}))},e.textEmployees=function(e,t){var n=t.filter((function(e){return _(e.phone)}));if(0!==t.length)if(0!==n.length){u.b.info("Sending texts...");var a=f(),s=n.map((function(t){return j.a.post(je,function(e,t){var n=ie(),a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FRONT_END_URL,s="\n====================\nHello ".concat(e.name,"!  \n          \nWe have a shift available:\n  Date: ").concat(S(t.shift_date),"\n  Client: ").concat(t.client.name,"\n  Time: ").concat(x(t.start_time)," to ").concat(x(t.end_time),".  \n\nPlease click on [").concat(a,"/text/").concat(n,"] to confirm, or log onto your employee dashboard to claim this shift.  \n\nThank you from the office of Schedule Plus Plus!\n====================");return{phoneNumber:e.phone,message:s,uuid:n,client:t.client,employee:e,shift:t}}(t,e),{headers:a})}));j.a.all(s).then().catch((function(e){var t,a,s=e.response.data.message,c=JSON.parse(e.config.data).phoneNumber,i=n.find((function(e){return e.phone===c})),r="";s.includes("number  is unverified")?r="Employee needs to verify number with Twilio":(a=20,r=(t=s).length<=a?t:t.slice(0,a)+"..."),u.b.error("Unable to text ".concat(i.name,": ").concat(r))}))}else u.b.info("No available employees with valid phone numbers to text.  However, they'll be able to see the shift on their dashboard");else u.b.error("No employees available to work that day!")},e.state={allClients:[],allAdmins:[],allEmployees:[],allShifts:[],allUnavails:[],show:"calendar"},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=f();j.a.all([this.getAllEmpsDB(t),this.getAllClientsDB(t),this.getAllAdminsDB(t),this.getAllShiftsDB(t),this.getAllUnavailsDB(t)]).then(j.a.spread((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0].data,c=n[1].data,i=n[2].data,r=n[3].data,o=n[4].data,l=E(r);e.setState({allEmployees:s,allClients:c,allAdmins:i,allShifts:l,allUnavails:o})}))).catch((function(e){return"Error downloading from database: ".concat(u.b.error(e.message))}))}},{key:"render",value:function(){var e=this;return"ADMIN"!==this.props.authenticatedRole?Object(H.jsx)(ce,{message:"Please log in to see ADMIN dashboard",icon:"lock"}):Object(H.jsxs)("section",{children:[Object(H.jsxs)($.a,{bg:"primary",variant:"dark",sticky:"top",children:[Object(H.jsx)($.a.Brand,{onClick:function(){return e.setShowCategory("calendar")},children:"CALENDAR"}),Object(H.jsxs)(Q.a,{className:"mr-auto",children:[Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("shifts")},children:"SHIFTS"}),Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("employees")},children:"EMPLOYEES"}),Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("clients")},children:"CLIENTS"}),Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("admins")},children:"ADMINS"})]})]}),this.showChosenCategory()]})}}]),n}(s.a.Component),be=n(41),Oe=function(e){var t=e.shiftsToday,n=e.shiftsOfDaySpotlight,a=e.dateStr,s=e.availStatus,c=e.toggleAvailCallback,i=function(e){return e.length>0?e.map((function(e,t){return Object(H.jsx)("section",{children:r(e)},t)})):Object(H.jsx)("section",{className:"text-centered",children:Object(H.jsx)("h3",{children:"No shifts scheduled"})})},r=function(e){return Object(H.jsxs)("section",{children:[Object(H.jsx)("h5",{className:"thead-dark text-centered",children:"SHIFT INFO"}),Object(H.jsxs)("section",{className:"card-shift centered-children-per-row_container",children:[Object(H.jsx)("p",{children:"DATE"}),Object(H.jsx)("p",{children:e.shift_date}),Object(H.jsx)("p",{children:"START"}),Object(H.jsx)("p",{children:x(e.start_time)}),Object(H.jsx)("p",{children:"END"}),Object(H.jsx)("p",{children:x(e.end_time)})]}),Object(H.jsx)("h5",{className:"thead-dark text-centered",children:"CLIENT INFO"}),Object(H.jsxs)("section",{className:"card-client centered-children-per-row_container",children:[Object(H.jsx)("p",{children:"CLIENT"}),Object(H.jsx)("p",{children:e.client.name}),Object(H.jsx)("p",{children:"PHONE"}),Object(H.jsx)("p",{children:e.client.phone}),Object(H.jsx)("p",{children:"EMAIL"}),Object(H.jsx)("p",{children:e.client.email}),Object(H.jsx)("p",{children:"ADDRESS"}),Object(H.jsx)("p",{children:e.client.address})]})]})};return Object(H.jsxs)("section",{className:"accordion-container",children:[Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showToday",className:"accordion-toggle_button gold-bg",children:Object(H.jsxs)("section",{className:"section-3-col",children:[Object(H.jsx)("section",{children:"\u25bc"}),Object(H.jsx)("section",{children:"TODAY"}),Object(H.jsx)("section",{children:"\u25bc"})]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showToday",children:Object(H.jsx)("section",{className:"lightgold-bg margin-all-1rem padding-all-1rem ",children:i(t)})})]})}),Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showCalendarClick",className:"accordion-toggle_button blue-bg",children:Object(H.jsxs)("section",{className:"section-3-col",children:[Object(H.jsx)("section",{children:"\u25bc"}),Object(H.jsx)("section",{children:S(a).toUpperCase()}),Object(H.jsx)("section",{children:"\u25bc"})]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showCalendarClick",children:Object(H.jsx)("section",{className:"lightblue-bg margin-all-1rem padding-all-1rem ",children:function(){var e=p(new Date),t=a<e;return n.length>0?Object(H.jsxs)("section",{children:[t?Object(H.jsx)("h3",{className:"text-centered",children:"Shift completed!"}):null,i(n)]}):t?Object(H.jsx)("h3",{className:"text-centered",children:"Nothing that day"}):0===n.length&&!0===s?Object(H.jsxs)("section",{className:"text-centered",children:[Object(H.jsx)("h3",{children:"No shifts scheduled"}),Object(H.jsx)("button",{onClick:function(){c(!1)},className:"btn btn-danger",children:"Take the day off"})]}):0===n.length&&!1===s?Object(H.jsxs)("section",{className:"text-centered",children:[Object(H.jsx)("h3",{children:"You have the day off"}),Object(H.jsx)("button",{onClick:function(){c(!0)},className:"btn btn-success",children:"I'm free to work"})]}):void 0}()})})]})})]})},fe=function(e){var t=e.empUnavails,n=e.empShifts,a=e.daySpotlight,s=e.shiftsToday,c=e.shiftsOfDay,i=e.availStatusOfDay,r=(e.unstaffedShifts,e.updateStateForCalendarDayCB),o=e.toggleAvailCallback,l=new Date;return Object(H.jsxs)("section",{children:[Object(H.jsx)("section",{className:"calendar-container",children:Object(H.jsx)(Y.a,{tileContent:function(e){var a=e.date,s=e.view,c=" - ",i="",r=p(a);if(!function(e){var n,a=Object(b.a)(t);try{for(a.s();!(n=a.n()).done;)if(n.value.day_off===e)return!0}catch(s){a.e(s)}finally{a.f()}return!1}(r)?function(e){var t,a=Object(b.a)(n);try{for(a.s();!(t=a.n()).done;)if(t.value.shift_date===e)return!0}catch(s){a.e(s)}finally{a.f()}return!1}(r)&&(c="ON",i="tile-work"):(c="OFF",i="tile-unavail"),N(r)?(c=" x ",i="tile-past"):r===p(l)&&(c="TODAY",i="tile-today"),"month"===s)return Object(H.jsx)("section",{className:i,children:c})},onChange:r,value:m(a)})}),Object(H.jsx)(Oe,{toggleAvailCallback:o,shiftsToday:s,shiftsOfDaySpotlight:c,dateStr:a,availStatus:i})]})},me=function(e){var t=e.sortedUnavails,n=e.freeToWorkCallback;return Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered",children:"UNAVAILABLE DAYS"}),t.map((function(e){return Object(H.jsxs)("section",{className:"employee-dash-unavails-table",children:[Object(H.jsx)("section",{children:S(e.day_off)}),Object(H.jsx)("button",{onClick:function(){n(e)},className:"btn btn-success margin-right-5rem",children:"I'm free to work"})]},e.id)}))]})},pe=function(e){var t=e.info,n=e.URL_endpoint,s=e.updateInfoCallback,c=JSON.parse(JSON.stringify(t)),i=Object(a.useState)(c),r=Object(R.a)(i,2),o=r[0],l=r[1],d=Object(a.useState)([]),h=Object(R.a)(d,2),b=h[0],O=h[1],m=function(e){o[e.target.name]=e.target.value,l(o)},p=function(){var e=[];if(""!==o.name&&o.name||e.push("Name cannot be blank"),o.phone&&""!==o.phone)if(_(o.phone)){var t=T(o.phone);o.phone=t}else{var n=A(o.phone);n?o.phone=n:e.push("Phone number format invalid")}return o.email&&""!==o.email&&(D(o.email)||e.push("Email invalid")),O(e),0===e.length};return Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered margin-all-1rem",children:"MY INFO"}),Object(H.jsx)("form",{children:Object(H.jsxs)("fieldset",{children:[Object(H.jsxs)("section",{className:"form-group margin-all-1rem",children:[Object(H.jsxs)("label",{children:["NAME: ",t.name]}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"name",onChange:m,placeholder:"new name here"}),Object(H.jsxs)("label",{className:"margin-top-1rem",children:["ADDRESS: ",t.address]}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"address",onChange:m,placeholder:"new address here"}),Object(H.jsxs)("label",{className:"margin-top-1rem",children:["PHONE: ",t.phone]}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"phone",onChange:m,placeholder:"new phone here"}),Object(H.jsxs)("label",{className:"margin-top-1rem",children:["EMAIL: ",t.email]}),Object(H.jsx)("input",{type:"text",className:"form-control",name:"email",onChange:m,placeholder:"new email here"})]}),Object(H.jsxs)("section",{className:"centered-children-per-row_container margin-all-1rem",children:[b===[]?null:function(e){var t=e.map((function(e,t){return Object(H.jsx)("li",{className:"centered-text",children:e},t)}));return Object(H.jsx)("ul",{className:"centered-children-per-row_container",children:t})}(b),Object(H.jsx)("button",{onClick:function(e){if(e.preventDefault(),p()){var t=f();j.a.put(n,o,{headers:t}).then(u.b.success("".concat(o.name," updated successfully")),s(o)).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))}},className:"btn btn-primary",children:"UPDATE"})]})]})})]})},ge=n(2),xe=n.n(ge),Se=function(e){for(var t=e.sortedOwnShifts,n=e.sortedUnstaffedShifts,a=e.sortedUnavails,s=e.takeShiftCallback,c=e.freeToWorkCallback,i=[],r=[],o=Object(be.a)(t);o[0];){if(!N(o[0].shift_date)){i=Object(be.a)(o);break}r.push(o.shift())}var l=function(e,t){return e.map((function(e){return Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showInfo",className:"accordion-toggle_button ".concat(t),children:Object(H.jsxs)("section",{className:"section-4-col",children:[Object(H.jsx)("section",{children:"\u25bc"}),Object(H.jsx)("section",{children:S(e.shift_date)}),Object(H.jsx)("section",{children:g(e.shift_date)}),Object(H.jsx)("section",{children:e.client.name})]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showInfo",children:Object(H.jsx)("section",{children:h(e)})})]})},e.id)}))},d=function(){return Object(H.jsx)("section",{children:n.map((function(e){return Object(H.jsx)(B.a,{children:Object(H.jsxs)("section",{children:[Object(H.jsx)(B.a.Toggle,{eventKey:"showInfo",className:N(e.shift_date)?"accordion-toggle_button gray-bg":"accordion-toggle_button lightblue-bg",children:Object(H.jsxs)("section",{className:"section-4-col",children:[Object(H.jsx)("section",{children:"\u25bc"}),Object(H.jsx)("section",{children:S(e.shift_date)}),Object(H.jsx)("section",{children:g(e.shift_date)}),Object(H.jsx)("section",{children:e.client.name})]})}),Object(H.jsx)(B.a.Collapse,{eventKey:"showInfo",children:Object(H.jsx)("section",{children:h(e,!0)})})]})},e.id)}))})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(H.jsxs)("section",{children:[Object(H.jsxs)("section",{className:N(e.shift_date)?"card-shift gray-bg":"card-shift lightblue-bg",children:[Object(H.jsx)("p",{children:"DATE"}),Object(H.jsx)("p",{children:e.shift_date}),Object(H.jsx)("p",{children:"START"}),Object(H.jsx)("p",{children:x(e.start_time)}),Object(H.jsx)("p",{children:"END"}),Object(H.jsx)("p",{children:x(e.end_time)})]}),Object(H.jsxs)("section",{className:"card-client",children:[Object(H.jsx)("p",{children:"CLIENT"}),e.client?Object(H.jsx)("p",{children:e.client.name}):Object(H.jsx)("p",{}),Object(H.jsx)("p",{children:"PHONE"}),e.client?Object(H.jsx)("p",{children:e.client.phone}):Object(H.jsx)("p",{}),Object(H.jsx)("p",{children:"EMAIL"}),e.client?Object(H.jsx)("p",{children:e.client.email}):Object(H.jsx)("p",{}),Object(H.jsx)("p",{children:"ADDRESS"}),e.client?Object(H.jsx)("p",{children:e.client.address}):Object(H.jsx)("p",{})]}),t?j(e):null]})},j=function(e){var n=function(e){var n,a=Object(b.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(s.shift_date>e)return!1;if(s.shift_date===e)return!0}}catch(c){a.e(c)}finally{a.f()}}(e.shift_date),c=function(e){var t,n=Object(b.a)(a);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(s.day_off>e)return!1;if(s.day_off===e)return!0}}catch(c){n.e(c)}finally{n.f()}}(e.shift_date);return n||c?n?Object(H.jsx)("section",{className:"gray-bg text-centered margin-all-1rem",children:Object(H.jsx)("p",{className:"padding-all-1rem",children:"You are already working elsewhere that day!"})}):c?Object(H.jsxs)("section",{className:"gray-bg text-centered margin-all-1rem",children:[Object(H.jsx)("p",{className:"padding-top-1rem",children:"You have the day off but you can change your mind!"}),Object(H.jsx)("button",{onClick:function(){u(e)},className:"btn btn-success margin-all-1rem",children:"I can work"})]}):void 0:Object(H.jsxs)("section",{className:"lightblue-bg text-centered margin-all-1rem",children:[Object(H.jsx)("p",{className:"padding-top-1rem",children:"You are eligible for this shift!"}),Object(H.jsx)("button",{onClick:function(){s(e)},className:"btn btn-primary margin-all-1rem",children:"Take the shift"})]})},u=function(e){var t=a.find((function(t){return t.day_off===e.shift_date}));c(t)};return t?Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered",children:"MY SHIFTS"}),l(i,"lightblue-bg"),Object(H.jsx)("h1",{className:"text-centered",children:"AVAILABLE SHIFTS"}),d(),Object(H.jsx)("h1",{className:"text-centered",children:"PAST SHIFTS"}),l(r,"gray-bg")]}):Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered",children:"MY SHIFTS"}),Object(H.jsx)("p",{children:"Nothing yet..."}),Object(H.jsx)("h1",{className:"text-centered",children:"AVAILABLE SHIFTS"}),d()]})};z.propTypes={sortedOwnShifts:xe.a.arrayOf(xe.a.object),sortedUnstaffedShifts:xe.a.arrayOf(xe.a.object),sortedUnavails:xe.a.arrayOf(xe.a.object),takeShiftCallback:xe.a.func.isRequired,freeToWorkCallback:xe.a.func.isRequired};var ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n),(e=t.call(this)).getEmpInfo=function(t){return j.a.get(e.state.EMP_DASH,{headers:t})},e.getEmpShifts=function(t){return j.a.get(e.state.EMP_DASH+"/shifts",{headers:t})},e.getEmpUnavails=function(t){return j.a.get(e.state.EMP_DASH+"/unavails",{headers:t})},e.getUnstaffedShifts=function(t){return j.a.get(e.state.EMP_DASH+"/unstaffedShifts",{headers:t})},e.setShowCategory=function(t){return e.setState({show:t})},e.showChosenCategory=function(){var t=e.state.show;return"calendar"===t?e.showCalendar():"shifts"===t?e.showAllShifts():"unavails"===t?e.showAllUnavails():"info"===t?e.showAllInfo():void 0},e.showAllInfo=function(){return Object(H.jsx)(pe,{info:e.state.empInfo,URL_endpoint:e.state.EMP_DASH,updateInfoCallback:e.updateInfo})},e.showAllShifts=function(){var t=E(e.state.empShifts),n=v(e.state.empUnavails),a=E(e.state.unstaffedShifts).filter((function(e){var n=p(new Date);if(e.shift_date<n)return!1;var a,s=Object(b.a)(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(e.shift_date===c.shift_date)return!1;if(e.shift_date<c.shift_date)break}}catch(i){s.e(i)}finally{s.f()}return!0}));return Object(H.jsx)(Se,{sortedOwnShifts:t,sortedUnstaffedShifts:a,sortedUnavails:n,freeToWorkCallback:e.freeToWork,takeShiftCallback:e.takeShift})},e.showAllUnavails=function(){var t=e.state.empUnavails,n=v(t);return 0===t.length?Object(H.jsx)("h3",{className:"text-centered margin-all-1rem",children:"No upcoming unavailable days"}):Object(H.jsx)("section",{children:Object(H.jsx)(me,{sortedUnavails:n,freeToWorkCallback:e.freeToWork})})},e.showCalendar=function(){return Object(H.jsx)(fe,{empUnavails:e.state.empUnavails,empShifts:e.state.empShifts,daySpotlight:e.state.daySpotlight,shiftsToday:e.state.shiftsToday,shiftsOfDay:e.state.shiftsOfDay,availStatusOfDay:e.state.availStatusOfDay,unstaffedShifts:e.state.unstaffedShifts,updateStateForCalendarDayCB:e.updateStateForCalendarDay,toggleAvailCallback:e.toggleAvail})},e.updateStateForCalendarDay=function(t){var n=p(t),a=e.state.empShifts.filter((function(e){return e.shift_date===n})),s=e.canTheyWorkThisDay(n,a,e.state.empUnavails);e.setState({daySpotlight:n,shiftsOfDay:a,availStatusOfDay:s})},e.canTheyWorkThisDay=function(e,t,n){if(t.length>0)return!1;var a,s=Object(b.a)(n);try{for(s.s();!(a=s.n()).done;){if(a.value.day_off===e)return!1}}catch(c){s.e(c)}finally{s.f()}return!0},e.freeToWork=function(t){var n=f();j.a.delete(e.state.EMP_DASH+"/unavails/".concat(t.id),{headers:n}).then((function(t){e.setState({empUnavails:t.data,availStatusOfDay:!0})})).catch((function(e){return u.b.error("ERROR deleting from db: ".concat(e.message))}))},e.toggleAvail=function(t){var n=Object(be.a)(e.state.empUnavails);if(t){var a=e.state.empUnavails.find((function(t){return t.day_off===e.state.daySpotlight}));e.freeToWork(a)}else{var s=f();j.a.post(e.state.EMP_DASH+"/unavails",{day_off:e.state.daySpotlight},{headers:s}).then((function(t){n.push(t.data),e.setState({empUnavails:n,availStatusOfDay:!1})})).catch((function(e){return u.b.error("ERROR adding from db: ".concat(e.message))}))}},e.takeShift=function(t){var n=e.state.EMP_DASH+"/shifts/".concat(t.id),a=f();j.a.put(n,null,{headers:a}).then((function(t){!function(e,t){if(e.length!==t.length)return!1;var n=I(e),a=I(t);return O.a.isEqual(n,a)}(e.state.empShifts,t.data)?(u.b.success("The shift is yours! Huzzah! \ud83e\udd73"),e.setState({empShifts:t.data})):u.b.error("UH OH! Shift was just taken by someone else \ud83d\ude15"),e.updateLatestUnstaffedShifts()})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))},e.updateLatestUnstaffedShifts=function(){var t=f();j.a.get(e.state.EMP_DASH+"/unstaffedShifts",{headers:t}).then((function(t){return e.setState({unstaffedShifts:t.data})})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))},e.updateInfo=function(t){e.setState({empInfo:t})};var a=p(new Date);return e.state={EMP_DASH:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_EMP_DASH+"/"+sessionStorage.getItem("databaseId"),empInfo:[],empUnavails:[],empShifts:[],daySpotlight:a,shiftsToday:[],shiftsOfDay:[],availStatusOfDay:null,show:"calendar",unstaffedShifts:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=f();j.a.all([this.getEmpInfo(t),this.getEmpShifts(t),this.getEmpUnavails(t),this.getUnstaffedShifts(t)]).then(j.a.spread((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0].data,c=n[1].data,i=n[2].data,r=n[3].data,o=p(new Date),l=c.filter((function(e){return e.shift_date===o})),d=e.canTheyWorkThisDay(o,l,i);e.setState({empInfo:s,empShifts:c,empUnavails:i,shiftsToday:l,shiftsOfDay:l,availStatusOfDay:d,unstaffedShifts:r})}))).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))}},{key:"render",value:function(){var e=this;return"EMPLOYEE"!==this.props.authenticatedRole?Object(H.jsx)(ce,{message:"Please log in to see EMPLOYEE dashboard",icon:"lock"}):Object(H.jsxs)("section",{children:[Object(H.jsxs)($.a,{bg:"primary",variant:"dark",sticky:"top",children:[Object(H.jsx)($.a.Brand,{onClick:function(){return e.setShowCategory("calendar")},children:"CALENDAR"}),Object(H.jsxs)(Q.a,{className:"mr-auto",children:[Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("shifts")},children:"SHIFTS"}),Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("unavails")},children:"UNAVAILABLE DAYS"}),Object(H.jsx)(Q.a.Link,{onClick:function(){return e.setShowCategory("info")},children:"INFO"})]})]}),this.showChosenCategory()]})}}]),n}(s.a.Component),Ee=n.p+"static/media/hourglass.69414f46.svg",Ne=n.p+"static/media/thumbsUp.919eb166.svg",_e=n.p+"static/media/twopeopleinteract.41f706aa.svg";var ye=function(e){var t=e.icon,n=e.message;return Object(H.jsxs)("section",{children:[Object(H.jsx)("h1",{className:"text-centered",children:n}),"hourglass"===t?Object(H.jsx)("img",{src:Ee,alt:"hourglass",className:"homepage-logo"}):"thumbsUp"===t?Object(H.jsx)("img",{src:Ne,alt:"thumbs up",className:"homepage-logo"}):Object(H.jsx)("img",{src:_e,alt:"2 people interacting",className:"homepage-logo"})]})};function Ce(e){var t=e.match,n="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TEXTED_LINK,"/").concat(t.params.uuid),s=Object(a.useState)("LOADING"),c=Object(R.a)(s,2),i=c[0],r=c[1],o=f();if("LOADING"===i)return j.a.get(n,{headers:o}).then((function(e){return r(e.data)})),Object(H.jsx)(ye,{message:"Loading...",icon:"hourglass"});if(null===i||!1===i)return Object(H.jsx)(ce,{message:"Sorry, shift is taken",icon:"stopwatch"});if(!0===i)return Object(H.jsx)(ye,{message:"YAY YOU GOT IT!",icon:"thumbsUp"});var l=i;return Object(H.jsxs)("section",{className:"homepage-section",children:[Object(H.jsx)("h1",{className:"text-centered",children:"Please Confirm Below"}),Object(H.jsxs)("section",{className:"card-shift lightblue-bg",children:[Object(H.jsx)("p",{children:"DATE"}),Object(H.jsx)("p",{children:l.shift_date}),Object(H.jsx)("p",{children:"START"}),Object(H.jsx)("p",{children:x(l.start_time)}),Object(H.jsx)("p",{children:"END"}),Object(H.jsx)("p",{children:x(l.end_time)})]}),Object(H.jsxs)("section",{className:"card-client",children:[Object(H.jsx)("p",{children:"CLIENT"}),Object(H.jsx)("p",{children:l.client.name}),Object(H.jsx)("p",{children:"PHONE"}),Object(H.jsx)("p",{children:l.client.phone}),Object(H.jsx)("p",{children:"EMAIL"}),Object(H.jsx)("p",{children:l.client.email}),Object(H.jsx)("p",{children:"ADDRESS"}),Object(H.jsx)("p",{children:l.client.address})]}),Object(H.jsxs)("section",{className:"text-centered",children:[Object(H.jsx)("button",{onClick:function(){j.a.post(n,{headers:o}).then((function(e){return r(e.data)})).catch((function(e){return u.b.error("ERROR: ".concat(e.message))}))},className:"btn btn-primary",children:"YES, I WANT THIS SHIFT!"}),Object(H.jsx)("li",{className:"fine-print",children:"This shift will appear on your employee dashboard after you accept."}),Object(H.jsx)("li",{className:"fine-print",children:"Close this window if you want to cancel."}),Object(H.jsx)("li",{className:"fine-print",children:"Or login above to access your dashboard for other options."})]})]})}var Te=n(13),Ae=n.p+"static/media/twopeople.ca8b00f5.svg";function De(){return Object(H.jsx)("section",{className:"homepage-section text-centered",children:Object(H.jsx)("img",{src:Ae,alt:"2 people",className:"homepage-logo"})})}var Ie=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).login=function(){var t=sessionStorage.getItem("googleId"),n=sessionStorage.getItem("googleAccessToken"),a={googleId:t,googleAccessToken:n,uuid:""},s=f(),c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LOGIN;j.a.post(c,a,{headers:s}).then((function(n){0===Object.entries(n.data).length&&(sessionStorage.setItem("authenticatedRole","NEED UUID"),e.setState({authenticatedRole:"NEED UUID"}));var a=Object.keys(n.data)[0],s=Object.values(n.data)[0].name,c=Object.values(n.data)[0].id;sessionStorage.setItem("authenticatedRole",a),sessionStorage.setItem("username",s),sessionStorage.setItem("databaseId",c),e.setState({authenticatedRole:a,googleId:t,username:s,databaseId:c}),e.greetToast(s)})).catch((function(e){"NEED UUID"!==sessionStorage.getItem("authenticatedRole")&&u.b.error("LOGIN ERROR! ".concat(e.message))}))},e.demoLogin=function(t){var n="demoUser",a="demoDatabaseId";sessionStorage.setItem("authenticatedRole",t),sessionStorage.setItem("username",n),sessionStorage.setItem("databaseId",a),e.setState({authenticatedRole:t,googleId:"demoGoogleId",username:n,databaseId:a}),e.greetToast(n,"You're logged in with role of ".concat(t))},e.greetToast=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=(new Date).getHours();t=a<12?"Good morning":a<17?"Good afternoon":"Good evening",console.log("... ".concat(n)),n?u.b.success("".concat(t,", ").concat(e," \ud83d\ude04  ").concat(n)):u.b.success("".concat(t,", ").concat(e," \ud83d\ude04"))},e.logout=function(){e.setState({authenticatedRole:"",googleId:"",username:"",databaseId:""}),u.b.success("Goodbye ".concat(sessionStorage.getItem("username")," \ud83d\udc4b")),sessionStorage.clear()},e.state={authenticatedRole:""},sessionStorage.setItem("authenticatedRole",""),sessionStorage.setItem("googleId",""),sessionStorage.setItem("googleAccessToken",""),sessionStorage.setItem("username",""),sessionStorage.setItem("databaseId",""),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.authenticatedRole,t=this.state.username,n=this.state.googleId,a=this.state.databaseId;return Object(H.jsxs)(U.a,{children:[Object(H.jsx)(M,{authenticatedRole:this.state.authenticatedRole,googleAuthCallback:this.login,demoLoginCallback:this.demoLogin,logoutCallback:this.logout}),"ADMIN"===e?Object(H.jsx)(Te.a,{to:"/adminDash",component:function(){return Object(H.jsx)(ve,{authenticatedRole:e,username:t,googleId:n,databaseId:a})}}):null,"EMPLOYEE"===e?Object(H.jsx)(Te.a,{to:"/employeeDash",component:function(){return Object(H.jsx)(ve,{authenticatedRole:e,username:t,googleId:n,databaseId:a})}}):null,Object(H.jsxs)(Te.d,{children:[Object(H.jsx)(Te.b,{path:"/",exact:!0,component:De}),Object(H.jsx)(Te.b,{path:"/adminDash",component:function(){return Object(H.jsx)(ue,{authenticatedRole:e,username:t,googleId:n,databaseId:a})}}),Object(H.jsx)(Te.b,{path:"/employeeDash",exact:!0,component:function(){return Object(H.jsx)(ve,{authenticatedRole:e,username:t,googleId:n,databaseId:a})}}),Object(H.jsx)(Te.b,{path:"/text/:uuid",component:Ce})]}),Object(H.jsx)(K,{}),Object(H.jsx)(u.a,{})]})}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(H.jsx)(Ie,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.a3ec28a1.chunk.js.map
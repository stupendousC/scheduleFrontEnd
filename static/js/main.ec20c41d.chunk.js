(this.webpackJsonpscheduleplusplus=this.webpackJsonpscheduleplusplus||[]).push([[0],{102:function(e,t,a){},121:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(23),c=a.n(r),s=(a(102),a(27)),o=a(28),i=a(32),m=a(31),u=a(5),d=a.n(u),h=(a(121),a(54),a(6)),f=(a(122),a(14)),E=a(95),p=function(){return{googleId:sessionStorage.getItem("googleId"),googleAccessToken:sessionStorage.getItem("googleAccessToken")}},g=function(e){var t=new Date(e+" 00:00-0800");return new Date(t)},b=function(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0"+a.toString()),n<10&&(n="0"+n.toString()),"".concat(t,"-").concat(a,"-").concat(n)},v=function(e){var t;t="string"===typeof e?g(e):e;var a=new Array(7);return a[0]="Sun",a[1]="Mon",a[2]="Tues",a[3]="Wed",a[4]="Thurs",a[5]="Fri",a[6]="Sat",a[t.getDay()]},y=function(e){var t=parseInt(e.slice(0,2));return t<12?"0"===e[0]?e.slice(1,5)+" A.M.":e.slice(0,5)+" A.M.":(t-=12)+e.slice(2,5)+" P.M."},S=function(e){var t=g(e),a=t.toLocaleString("default",{month:"short"}),n=t.getUTCDate(),l=t.getFullYear();return"".concat(a," ").concat(n,", ").concat(l)},N=function(e){return e.sort((function(e,t){return t.day_off<e.day_off?1:-1}))},I=function(e){return e.sort((function(e,t){return t.shift_date<=e.shift_date?1:-1}))},C=function(e){return b(new Date)>e},k=function(e){if(!e)return!1;if(e.length<10||e.length>14)return!1;if(10===e.length||11===e.length)return O(e);if(12===e.length){if("-"!==e[3]||"-"!==e[7])return!1;var t=e.slice(0,3),a=e.slice(4,7),n=e.slice(8,12);return A([t,a,n])}if(14===e.length){if("-"!==e[1]||"-"!==e[5]||"-"!==e[9])return!1;var l=e[0],r=e.slice(2,5),c=e.slice(6,9),s=e.slice(10,14);return A([l,r,c,s])}},O=function(e){for(var t=e;"0"===t[0]&&t.length>1;)t=t.slice(1,t.length);return t===parseInt(e).toString()},A=function(e){var t,a=Object(f.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!O(n))return!1}}catch(l){a.e(l)}finally{a.f()}return!0},w=function e(t){return 10===t.length?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6,10)):11===t.length?e(t.slice(1,11)):t},D=function(e){if(13===e.length){if("("!==e[0])return null;if(")"!==e[4])return null;if("-"!==e[8])return null;var t=e.slice(1,4),a=e.slice(5,8),n=e.slice(9,13);return A([t,a,n])?"".concat(t,"-").concat(a,"-").concat(n):null}return null},T=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},L=function(e){return e.sort((function(e,t){return t.id<=e.id?1:-1}))},_=a(11),R=a(81),x=a.n(R),j=a(82),U=a.n(j),M=a(42),P=a(25),B=function(e){var t=e.authenticatedRole,a=e.googleAuthCallback,r=e.demoLoginCallback,c=e.logoutCallback,s=Object(n.useState)(""),o=Object(_.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(!1),f=Object(_.a)(u,2),E=f[0],g=f[1],b=function(){return g(!1)},v=function(){return g(!0)},y=function(e){var t=e.profileObj.googleId;sessionStorage.setItem("googleId",t),a()},S=function(e){console.log("GoogleLogin failed:"),console.log(e)},N=function(){var e=function(e){console.log("gonna log you in as ".concat(e)),r(e)};return l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){e("ADMIN")}},"Bypass Google, I just want to poke around as an ADMIN"),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){e("EMPLOYEE")}},"Bypass Google, I just want to poke around as an EMPLOYEE"))},I=function(){return l.a.createElement("section",{className:"btn btn-google"},l.a.createElement(U.a,{clientId:"10529880190-r19j0h35rit1kcoki6dnk9itkhpkqs9e.apps.googleusercontent.com",buttonText:"LOGIN WITH GOOGLE",onSuccess:y,onFailure:S,cookiePolicy:"single_host_origin"}))};return l.a.createElement("section",null,l.a.createElement("section",{className:"loginBanner-section text-centered"},l.a.createElement(P.b,{to:"/"},l.a.createElement("img",{src:x.a,alt:"sppBannerLogo",className:"img-90"})),t?function(){var e=sessionStorage.getItem("username");return"ADMIN"===t?l.a.createElement("section",{className:"dashboard-buttons_container"},l.a.createElement("button",{className:"btn btn-success dashboard-buttons"},l.a.createElement(P.b,{to:"/adminDash"},e,"'s Dashboard")),l.a.createElement("button",{className:"btn btn-danger dashboard-buttons",onClick:c},l.a.createElement(P.b,{to:"/"},"LOGOUT"))):"EMPLOYEE"===t?l.a.createElement("section",{className:"dashboard-buttons_container"},l.a.createElement("button",{className:"btn btn-success dashboard-buttons"},l.a.createElement(P.b,{to:"/employeeDash"},e,"'s Dashboard")),l.a.createElement("button",{className:"btn btn-danger dashboard-buttons",onClick:c},l.a.createElement(P.b,{to:"/"},"LOGOUT"))):l.a.createElement("section",{className:"dashboard-buttons_container"},l.a.createElement("button",{className:"btn btn-warning dashboard-buttons",onClick:v},"First time logging in?  Click to activate account!"),l.a.createElement("button",{className:"btn btn-danger dashboard-buttons",onClick:c},l.a.createElement(P.b,{to:"/"},"LOGOUT")))}():l.a.createElement("div",null,I(),N())),l.a.createElement(M.a,{show:E,onHide:b},l.a.createElement(M.a.Header,{closeButton:!0},l.a.createElement(M.a.Title,null,"Welcome to Schedule Plus Plus!")),l.a.createElement(M.a.Body,null,"Please copy and paste your unique verification id (uuid), including the dashes.",l.a.createElement("form",null,l.a.createElement("input",{type:"text",className:"form-control margin-top-1rem",onChange:function(e){m(e.target.value)},placeholder:"Example: 12345678-abcd-abcd-abcd-1234abcd1234"}),l.a.createElement("section",{className:"centered-children-per-row_container"},l.a.createElement("button",{className:"btn btn-primary margin-top-1rem",onClick:function(e){e.preventDefault(),b();var t={googleId:sessionStorage.getItem("googleId"),uuid:i},n=p();d.a.post("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/login/firstTime",t,{headers:n}).then((function(e){var t=Object.keys(e.data)[0];"ADMIN"===t||"EMPLOYEE"===t?a():h.b.error("Invalid uuid verification code, please double check and try again")})).catch((function(e){return h.b.error(e.message)}))}},"Log in!"))))))},H=a(60),F=a.n(H);function G(){return l.a.createElement("section",{className:"footer"},l.a.createElement("img",{src:F.a,alt:"redCrossFlag",className:"img-5"}),l.a.createElement("a",{href:"https://github.com/stupendousC",target:"_blank",rel:"noopener noreferrer"}," Made by: Caroline Wu "),l.a.createElement("img",{src:F.a,alt:"redCrossFlag",className:"img-5"}),l.a.createElement("p",{className:"fine-print"},"All icons from www.freeicons.io"))}var Y=a(85),K=a(8),W=a(49),V=a.n(W),q=function(e){var t=e.basicShiftsInfo,a=(e.dateStr,e.showColorBasedOnDay);return l.a.createElement("section",{className:a()},t&&t!==[]&&0!==t.length?l.a.createElement("section",null,l.a.createElement("section",{className:"section-4-col padding-top-1rem text-centered"},l.a.createElement("h5",null,"CLIENT"),l.a.createElement("h5",null,"EMPLOYEE"),l.a.createElement("h5",null,"START"),l.a.createElement("h5",null,"END")),l.a.createElement("section",{className:"text-centered padding-bottom-1rem"},t.map((function(e){return l.a.createElement("section",{key:e.id,className:"section-4-col"},l.a.createElement("section",null,e.client.name),l.a.createElement("section",null,e.employee?e.employee.name:""),l.a.createElement("section",null,y(e.start_time)),l.a.createElement("section",null,y(e.end_time)))})))):l.a.createElement("h3",{className:"text-centered padding-all-1rem"},"No shifts scheduled"))},J=function(e){var t=e.daySpotlight,a=e.allClients,r=e.availEmpsOfDay,c=e.updateAllShiftsCallback,s=e.textEmployeesCallback,o=e.showColorBasedOnDay,i=Object(n.useState)(null),m=Object(_.a)(i,2),u=m[0],f=m[1],E=Object(n.useState)("09:00:00"),g=Object(_.a)(E,2),b=g[0],v=g[1],y=Object(n.useState)("17:00:00"),N=Object(_.a)(y,2),I=N[0],k=N[1],O=function(){return!(C(t)||!u||I<=b)},A=function(e){"startTime"===e.target.id?v(e.target.value):"endTime"===e.target.id&&k(e.target.value)};return l.a.createElement("section",{className:o()},l.a.createElement("h1",{className:"text-centered"},S(t)),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=a.find((function(e){return e.id===u})),l={shift_date:t,start_time:b,end_time:I,client:n,client_id:u},r=null,o=p();d.a.post("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/shifts",l,{headers:o}).then((function(e){r=e.data,c(),s(r)})).catch((function(e){return h.b.error("ERROR: Can't make new shift: ".concat(e.message))}))},className:"px-4 py-3"},l.a.createElement("section",{className:"form-group"},l.a.createElement("label",null,"Client"),l.a.createElement("select",{className:"form-control",onChange:function(e){"-- Select --"===e.target.value?f(null):f(parseInt(e.target.value))}},l.a.createElement("option",{defaultValue:!0},"-- Select --"),a.map((function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)}))),l.a.createElement("label",null,"Start time"),l.a.createElement("input",{id:"startTime",onChange:A,className:"form-control",type:"time",defaultValue:"09:00:00"}),l.a.createElement("label",null,"End time"),l.a.createElement("input",{id:"endTime",onChange:A,className:"form-control",type:"time",defaultValue:"17:00:00"})),O()?null:function(){var e=function(){var e=[];return C(t)&&e.push("Date cannot be in the past"),u||e.push("Please select a client before submitting form"),I<=b&&e.push("Start time must be before end time"),e}().map((function(e,t){return l.a.createElement("li",{key:t,className:"centered-text"},e)}));return l.a.createElement("ul",{className:"centered-children-per-row_container"},e)}(),l.a.createElement("section",{className:"centered-children-per-row_container"},l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:0===r.length?"No one is available -> MAKE NEW SHIFT anyway":"MAKE NEW SHIFT & NOTIFY ALL THOSE AVAILABLE",disabled:!O()}),l.a.createElement("li",{className:"fine-print centered-text"},"New shift will be visible on employee dashboards, open on a first-come-first-served basis"),l.a.createElement("li",{className:"fine-print centered-text"},"Texts will also be sent to all those available, with valid phone numbers in their record"))))},z=function(e){var t=e.allShifts,a=e.allClients,r=e.updateAllShiftsCallback,c=e.textEmployeesCallback,s=b(new Date),o=Object(n.useState)(s),i=Object(_.a)(o,2),m=i[0],u=i[1],E=Object(n.useState)("LOADING"),v=Object(_.a)(E,2),y=v[0],N=v[1],I=Object(n.useState)("LOADING"),k=Object(_.a)(I,2),O=k[0],A=k[1],w=function(e){var a,n=[],l=Object(f.a)(t);try{for(l.s();!(a=l.n()).done;){var r=a.value;if(r.shift_date===e)n.push(r);else if(r.shift_date>e)break}}catch(c){l.e(c)}finally{l.f()}N(n)},D=function(e){var t="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/employees/availableEmployees"+"/".concat(e),a=p();d.a.get(t,{headers:a}).then((function(e){return A(e.data)})).catch((function(e){return h.b.error(e.message)}))},T=function(){return m===s?"accordion-toggle_button_gold":0===O.length?"accordion-toggle_button_red":C(m)?"accordion-toggle_button_gray":"accordion-toggle_button"},L=function(){return m===b(new Date)?"lightgold-bg":C(m)?"lightgray-bg":0===O.length?"lightred-bg":"lightblue-bg"},R=function(){return O.map((function(e){return l.a.createElement("section",{key:e.id,className:"section-3-col text-centered"},l.a.createElement("section",null,e.name),l.a.createElement("section",null,e.phone),l.a.createElement("section",null,e.email))}))};return"LOADING"===y&&w(m),"LOADING"===O&&D(m),"LOADING"===y&&"LOADING"===O?l.a.createElement("section",null,"LOADING"):l.a.createElement("section",null,l.a.createElement("section",{className:"calendar-container"},l.a.createElement(V.a,{tileContent:function(e){var t=e.date,a=e.view,n=" - ",r="",c=b(t);if(m===c&&0===O.length&&(n="\ud83d\ude31",r="tile-no-workers"),C(c)?(n=" x ",r="tile-past"):c===s&&(n="TODAY",r="tile-today"),"month"===a)return l.a.createElement("section",{className:r},n)},onChange:function(e){var t=b(e);w(t),D(t),u(t)},value:g(m)})),l.a.createElement(K.a,null,l.a.createElement(K.a.Toggle,{eventKey:"newShift",className:T()},l.a.createElement("section",null,l.a.createElement("section",null,"\u25bc MAKE A NEW SHIFT"))),l.a.createElement(K.a.Collapse,{eventKey:"newShift"},l.a.createElement(J,{daySpotlight:m,allClients:a,availEmpsOfDay:O,updateAllShiftsCallback:r,textEmployeesCallback:function(e){c(e,O)},showColorBasedOnDay:L}))),l.a.createElement(K.a,null,l.a.createElement(K.a.Toggle,{eventKey:"availEmpList",className:T()},l.a.createElement("section",null,l.a.createElement("section",null,"\u25bc ","LOADING"===O?"Loading":O.length," AVAILABLE EMPLOYEES FOR ",S(m)))),l.a.createElement(K.a.Collapse,{eventKey:"availEmpList"},C(m)?l.a.createElement("section",{className:L()+" text-centered"}," This day is in the past..."):"LOADING"===O?l.a.createElement("section",{className:L()+" text-centered"},"Loading..."):0===O.length?l.a.createElement("section",{className:L()+" text-centered"},"No one is available!"):l.a.createElement("section",{className:"padding-all-1rem ".concat(L())},l.a.createElement("section",{className:"section-3-col text-centered"},l.a.createElement("h5",null,"EMPLOYEE"),l.a.createElement("h5",null,"PHONE"),l.a.createElement("h5",null,"EMAIL")),R()))),l.a.createElement(K.a,null,l.a.createElement(K.a.Toggle,{eventKey:"dayAgenda",className:T()},l.a.createElement("section",null,l.a.createElement("section",null,"\u25bcAGENDA FOR ",S(m)))),l.a.createElement(K.a.Collapse,{eventKey:"dayAgenda"},l.a.createElement(q,{basicShiftsInfo:y,dateStr:m,showColorBasedOnDay:L}))))},Z=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).setPastVsCurrentShifts=function(){var t,a=[],n=[],l=Object(f.a)(e.props.allShifts);try{for(l.s();!(t=l.n()).done;){var r=t.value;C(r.shift_date)?n.push(r):a.push(r)}}catch(c){l.e(c)}finally{l.f()}e.setState({pastShifts:n,currentShifts:a})},e.showShiftsTable=function(t,a){var n=null,r=null;return"PAST"===a?(n="gray-bg",r="lightgray-bg"):"CURRENT"===a&&(n="blue-bg",r="lightblue-bg"),0===t.length?l.a.createElement("section",{className:"text-centered ".concat(r)},"No shifts"):l.a.createElement("section",null,t.map((function(t){return l.a.createElement(K.a,{key:t.id},l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showInfo",className:"accordion-toggle_button ".concat(n)},l.a.createElement("section",{className:"section-4-col"},l.a.createElement("section",null,"\u25bc #",t.id),l.a.createElement("section",null,S(t.shift_date)),l.a.createElement("section",null,t.client.name),l.a.createElement("section",null,"CURRENT"===a?e.showEmpNameOrButton(t):null))),l.a.createElement(K.a.Collapse,{eventKey:"showInfo"},l.a.createElement("section",null,e.showWholeShiftCard(t,a,r)))))})))},e.showEmpNameOrButton=function(e){return e.employee?e.employee.name:l.a.createElement("section",{className:"fake-btn"},"Find employees")},e.showWholeShiftCard=function(t,a,n){var r=t.client;return l.a.createElement("section",null,l.a.createElement("section",{className:"card-shift centered-children-per-row_container ".concat(n)},l.a.createElement("p",null,"DATE"),l.a.createElement("p",null,t.shift_date),l.a.createElement("p",null,"START"),l.a.createElement("p",null,y(t.start_time)),l.a.createElement("p",null,"END"),l.a.createElement("p",null,y(t.end_time))),l.a.createElement("section",{className:"card-client centered-children-per-row_container"},l.a.createElement("p",null,"CLIENT"),r.name?l.a.createElement("p",null,r.name):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"PHONE"),r.phone?l.a.createElement("p",null,r.phone):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"EMAIL"),r.email?l.a.createElement("p",null,r.email):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"ADDRESS"),r.address?l.a.createElement("p",null,r.address):l.a.createElement("p",null,"MISSING")),l.a.createElement("section",null,e.showEmployeeCardSection(t,a,n)))},e.showEmployeeCardSection=function(t,a,n){return"PAST"===a?l.a.createElement("section",{className:"".concat(n," text-centered")},"In the past"):"CURRENT"===a?t.employee?e.showEmpInCard(t,n):e.showAvailEmpsInCard(t,n):void 0},e.showEmpInCard=function(e,t){var a=e.employee;return l.a.createElement("section",{className:"card-employee ".concat(t)},l.a.createElement("p",null,"EMPLOYEE"),a.name?l.a.createElement("p",null,a.name):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"PHONE"),a.phone?l.a.createElement("p",null,a.phone):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"EMAIL"),a.email?l.a.createElement("p",null,a.email):l.a.createElement("p",null,"MISSING"),l.a.createElement("p",null,"ADDRESS"),a.address?l.a.createElement("p",null,a.address):l.a.createElement("p",null,"MISSING"))},e.showAvailEmpsInCard=function(t){if("LOADING"===e.state.availEmployeesByShiftId)return l.a.createElement("section",{className:"card-employee lightblue-bg"},"Loading...");var a=e.state.availEmployeesByShiftId[t.id];if(0===a.length)return l.a.createElement("section",{className:"card-employee red-bg"},"NO EMPLOYEES AVAILABLE!");var n=Array.from(a),r=n.length;return l.a.createElement("section",{className:"lightblue-bg"},l.a.createElement("button",{onClick:function(){e.props.textEmployeesCallback(t,a)},className:"btn btn-primary margin-left-1rem"},"TEXT ALL ",r," AVAILABLE EMPLOYEES"),e.rowsOfEmps(n))},e.rowsOfEmps=function(e){return e.map((function(e,t){return l.a.createElement("section",{key:e.id,className:"card-employee lightblue-bg"},l.a.createElement("section",null,e.name),l.a.createElement("section",null,e.phone))}))},e.state={availEmployeesByShiftId:"LOADING",pastShifts:[],currentShifts:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={},a=this.props.allShifts.filter((function(e){return!e.employee})),n=p(),l=a.map((function(e){var t="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/shifts/availableEmployees"+"/".concat(e.id);return d.a.get(t,{headers:n})}));d.a.all(l).then(d.a.spread((function(){for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];for(var c=0;c<a.length;c++){var s=a[c].id;t[s]=l[c].data}e.setState({availEmployeesByShiftId:t})}))).catch((function(e){return h.b.error("ERROR loading info from database: ".concat(e))})),this.setPastVsCurrentShifts()}},{key:"render",value:function(){return l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered margin-all-1rem"},"CURRENT SHIFTS"),this.showShiftsTable(this.state.currentShifts,"CURRENT"),l.a.createElement("h1",{className:"text-centered margin-all-1rem"},"PAST SHIFTS"),this.showShiftsTable(this.state.pastShifts,"PAST"))}}]),a}(l.a.Component),$=function(e){var t=e.undo,a=e.closeToast,n=e.message;return l.a.createElement("h3",null,n,l.a.createElement("button",{onClick:function(){t(),a()},className:"btn btn-primary"},"UNDO"))},X=function(e){var t=e.personType,r=e.peopleList,c=e.URL_endpoint,s=e.setStateKey,o=e.updatePeopleListCB,i=Object(n.useState)(null),m=Object(_.a)(i,2),u=m[0],f=m[1],E=Object(n.useState)(!1),g=Object(_.a)(E,2),b=g[0],v=g[1],y=Object(n.useState)(null),S=Object(_.a)(y,2),N=S[0],I=S[1],C=Object(n.useState)({name:null,phone:null,email:null,address:null,active:!0}),O=Object(_.a)(C,2),A=O[0],L=(O[1],Object(n.useState)([])),R=Object(_.a)(L,2),x=R[0],j=R[1],U=Object(n.useState)([]),M=Object(_.a)(U,2),P=M[0],B=M[1],H=null,F=p(),G=a(80),Y=function(e){return!0===b?l.a.createElement("form",{className:"margin-all-1rem"},l.a.createElement("fieldset",null,l.a.createElement("section",{className:"form-group"},l.a.createElement("label",null,"NAME"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",placeholder:e.name,onChange:Q}),l.a.createElement("label",null,"ADDRESS"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",placeholder:e.address,onChange:Q}),l.a.createElement("label",null,"PHONE"),l.a.createElement("input",{type:"text",className:"form-control",name:"phone",placeholder:e.phone,onChange:Q}),l.a.createElement("label",null,"EMAIL"),l.a.createElement("input",{type:"text",className:"form-control",name:"email",placeholder:e.email,onChange:Q})),l.a.createElement("section",{className:"margin-all-1rem"},P===[]?null:J(P),l.a.createElement("button",{onClick:ee,className:"btn btn-primary"},"UPDATE")))):l.a.createElement("section",{className:"card-person lightblue-bg"},l.a.createElement("p",null,"ID"),l.a.createElement("p",null,e.id),l.a.createElement("p",null,"NAME"),l.a.createElement("p",null,e.name),l.a.createElement("p",null,"PHONE"),l.a.createElement("p",null,e.phone),l.a.createElement("p",null,"EMAIL"),l.a.createElement("p",null,e.email),l.a.createElement("p",null,"ADDRESS"),l.a.createElement("p",null,e.address),l.a.createElement("p",null,"UUID (for 1st time login)"),l.a.createElement("p",null,e.uuid))},W=function(e){A[e.target.name]=e.target.value},V=function(e){e.preventDefault(),q(A,j)&&d.a.post(c,A,{headers:F}).then((function(e){h.b.success("".concat(A.name," added successfully")),o(s,c)})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))},q=function(e,t){var a=[];if(""!==e.name&&e.name||a.push("Name cannot be blank"),e.phone&&""!==e.phone)if(k(e.phone)){var n=w(e.phone);e.phone=n}else{var l=D(e.phone);l?e.phone=l:a.push("Phone number format invalid")}return e.email&&""!==e.email&&(T(e.email)||a.push("Email invalid")),t(a),0===a.length},J=function(e){var t=e.map((function(e,t){return l.a.createElement("li",{key:t,className:"centered-text"},e)}));return l.a.createElement("ul",{className:"centered-children-per-row_container"},t)},z=function(e){u===e?f(""):(f(e),B([]))},Z=function(e,t){var a=t[e];z(a),v(!1)},X=function(e,t){var a=t[e];z(a),v(!0);var n=JSON.parse(JSON.stringify(a));I(n)},Q=function(e){N[e.target.name]=e.target.value,I(N)},ee=function(e){e.preventDefault(),q(N,B)&&d.a.put("".concat(c,"/").concat(N.id),N,{headers:F}).then((function(e){h.b.success("".concat(N.name," updated successfully"));r.map((function(t){return t.id===N.id?e.data:t}));o(s,c)})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))},te=function(e){f(""),H=e,Object(h.b)(l.a.createElement($,{undo:ae,message:"Deleting ".concat(e.name)}),{onClose:ne})},ae=function(){H=null},ne=function(){H&&d.a.delete(c+"/"+H.id,{headers:F}).then((function(e){o(s,c)})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))};return l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered margin-all-1rem"},"ALL ",t.toUpperCase(),"S"),function(){var e=G();return A.uuid=e,l.a.createElement(K.a,null,l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showForm",className:"accordion-toggle_button gold-bg"},l.a.createElement("section",{className:"margin-all-1rem capitalize"},"\u25bc add new ",t," \u25bc")),l.a.createElement(K.a.Collapse,{eventKey:"showForm"},l.a.createElement("form",{className:"margin-all-1rem lightgold-bg"},l.a.createElement("fieldset",null,l.a.createElement("section",{className:"margin-all-1rem form-group"},l.a.createElement("label",null,"NAME"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:W}),l.a.createElement("label",null,"ADDRESS"),l.a.createElement("input",{type:"text",className:"form-control",name:"address",onChange:W}),l.a.createElement("label",null,"PHONE"),l.a.createElement("input",{type:"text",className:"form-control",name:"phone",onChange:W}),l.a.createElement("label",null,"EMAIL"),l.a.createElement("input",{type:"text",className:"form-control",name:"email",onChange:W}),l.a.createElement("label",null,"UUID"),l.a.createElement("input",{type:"text",className:"form-control",disabled:!0,name:"uuid",placeholder:A.uuid})),l.a.createElement("section",{className:"centered-children-per-row_container margin-all-1rem"},x===[]?null:J(x),l.a.createElement("button",{onClick:V,className:"btn btn-primary"},"ADD")))))))}(),function(e){return e.map((function(t,a){return l.a.createElement("section",{key:a,className:"margin-all-1rem"},l.a.createElement("section",{className:"peopleTable"},l.a.createElement("section",null,t.name),l.a.createElement("section",null,l.a.createElement("button",{onClick:function(){return Z(a,e)},className:"btn btn-primary"},"Info")),l.a.createElement("section",null,l.a.createElement("button",{onClick:function(){return X(a,e)},className:"btn btn-warning"},"Update")),l.a.createElement("section",null,l.a.createElement("button",{onClick:function(){return te(t)},className:"btn btn-danger"},"Deactivate"))),l.a.createElement("section",null,u===t?Y(t):null))}))}(r))},Q=a(150),ee=a(149),te=a(86),ae=a.n(te),ne=a(87),le=a.n(ne),re=a(88),ce=a.n(re),se=a(89),oe=a.n(se),ie=a(90),me=a.n(ie);function ue(e){var t=e.icon,a=e.message;return l.a.createElement("section",{className:"margin-all-1rem"},l.a.createElement("h1",{className:"text-centered margin-all-1rem"},a),"alarm"===t?l.a.createElement("img",{src:ae.a,alt:"alarm clock",className:"homepage-logo"}):"stopwatch"===t?l.a.createElement("img",{src:le.a,alt:"stopwatch",className:"homepage-logo"}):"warning"===t?l.a.createElement("img",{src:ce.a,alt:"warning sign",className:"homepage-logo"}):"lock"===t?l.a.createElement("img",{src:me.a,alt:"lock",className:"homepage-logo"}):l.a.createElement("img",{src:oe.a,alt:"man with question bubble above head",className:"homepage-logo"}))}var de=a(80),he="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/employees",fe="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/clients",Ee="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/admins",pe="http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/shifts",ge=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getAllEmpsDB=function(e){return d.a.get(he,{headers:e})},e.getAllClientsDB=function(e){return d.a.get(fe,{headers:e})},e.getAllAdminsDB=function(e){return d.a.get(Ee,{headers:e})},e.getAllShiftsDB=function(e){return d.a.get(pe,{headers:e})},e.getAllUnavailsDB=function(e){return d.a.get("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/employees",{headers:e})},e.setShowCategory=function(t){return e.setState({show:t})},e.showChosenCategory=function(){var t=e.state.show;return"calendar"===t?e.showCalendar():"admins"===t?e.showAllAdmins():"employees"===t?e.showAllEmployees():"clients"===t?e.showAllClients():"shifts"===t?e.showAllShifts():void 0},e.showCalendar=function(){return l.a.createElement(z,{allClients:e.state.allClients,allShifts:e.state.allShifts,updateAllShiftsCallback:e.updateAllShifts,textEmployeesCallback:e.textEmployees})},e.showAllShifts=function(){return l.a.createElement(Z,{allShifts:e.state.allShifts,textEmployeesCallback:e.textEmployees})},e.showAllEmployees=function(){return l.a.createElement(X,{personType:"employee",peopleList:e.state.allEmployees,URL_endpoint:he,setStateKey:"allEmployees",updatePeopleListCB:e.updatePeopleList})},e.showAllAdmins=function(){return l.a.createElement(X,{personType:"admin",peopleList:e.state.allAdmins,URL_endpoint:Ee,setStateKey:"allAdmins",updatePeopleListCB:e.updatePeopleList})},e.showAllClients=function(){return l.a.createElement(X,{personType:"client",peopleList:e.state.allClients,URL_endpoint:fe,setStateKey:"allClients",updatePeopleListCB:e.updatePeopleList})},e.updatePeopleList=function(t,a){var n=p();d.a.get(a,{headers:n}).then((function(a){return e.setState(Object(Y.a)({},t,a.data))})).catch((function(e){return h.b.error("ERROR downloading list: ".concat(e.message))}))},e.updateAllShifts=function(){var t=p();d.a.get(pe,{headers:t}).then((function(t){var a=I(t.data);e.setState({allShifts:a})})).catch((function(e){return h.b.error(e.message)}))},e.textEmployees=function(e,t){var a=t.filter((function(e){return k(e.phone)}));if(0!==t.length)if(0!==a.length){h.b.info("Sending texts...");var n=p(),l=a.map((function(t){return d.a.post("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/admin/sendText",function(e,t){var a=de(),n="\n====================\nHello ".concat(e.name,"!  \n          \nWe have a shift available:\n  Date: ").concat(S(t.shift_date),"\n  Client: ").concat(t.client.name,"\n  Time: ").concat(y(t.start_time)," to ").concat(y(t.end_time),".  \n\nPlease click on [").concat("http://schedplusplus.s3-website-us-west-2.amazonaws.com/","/text/").concat(a,"] to confirm, or log onto your employee dashboard to claim this shift.  \n\nThank you from the office of Schedule Plus Plus!\n====================");return{phoneNumber:e.phone,message:n,uuid:a,client:t.client,employee:e,shift:t}}(t,e),{headers:n})}));d.a.all(l).then().catch((function(e){var t,n,l=e.response.data.message,r=JSON.parse(e.config.data).phoneNumber,c=a.find((function(e){return e.phone===r})),s="";l.includes("number  is unverified")?s="Employee needs to verify number with Twilio":(n=20,s=(t=l).length<=n?t:t.slice(0,n)+"..."),h.b.error("Unable to text ".concat(c.name,": ").concat(s))}))}else h.b.info("No available employees with valid phone numbers to text.  However, they'll be able to see the shift on their dashboard");else h.b.error("No employees available to work that day!")},e.state={allClients:[],allAdmins:[],allEmployees:[],allShifts:[],allUnavails:[],show:"calendar"},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=p();d.a.all([this.getAllEmpsDB(t),this.getAllClientsDB(t),this.getAllAdminsDB(t),this.getAllShiftsDB(t),this.getAllUnavailsDB(t)]).then(d.a.spread((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var l=a[0].data,r=a[1].data,c=a[2].data,s=a[3].data,o=a[4].data,i=I(s);e.setState({allEmployees:l,allClients:r,allAdmins:c,allShifts:i,allUnavails:o})}))).catch((function(e){return"Error downloading from database: ".concat(h.b.error(e.message))}))}},{key:"render",value:function(){var e=this;return"ADMIN"!==this.props.authenticatedRole?l.a.createElement(ue,{message:"Please log in to see ADMIN dashboard",icon:"lock"}):l.a.createElement("section",null,l.a.createElement(Q.a,{bg:"primary",variant:"dark",sticky:"top"},l.a.createElement(Q.a.Brand,{onClick:function(){return e.setShowCategory("calendar")}},"CALENDAR"),l.a.createElement(ee.a,{className:"mr-auto"},l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("shifts")}},"SHIFTS"),l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("employees")}},"EMPLOYEES"),l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("clients")}},"CLIENTS"),l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("admins")}},"ADMINS"))),this.showChosenCategory())}}]),a}(l.a.Component),be=a(41),ve=function(e){var t=e.shiftsToday,a=e.shiftsOfDaySpotlight,n=e.dateStr,r=e.availStatus,c=e.toggleAvailCallback,s=function(e){return e.length>0?e.map((function(e,t){return l.a.createElement("section",{key:t},o(e))})):l.a.createElement("section",{className:"text-centered"},l.a.createElement("h3",null,"No shifts scheduled"))},o=function(e){return l.a.createElement("section",null,l.a.createElement("h5",{className:"thead-dark text-centered"},"SHIFT INFO"),l.a.createElement("section",{className:"card-shift centered-children-per-row_container"},l.a.createElement("p",null,"DATE"),l.a.createElement("p",null,e.shift_date),l.a.createElement("p",null,"START"),l.a.createElement("p",null,y(e.start_time)),l.a.createElement("p",null,"END"),l.a.createElement("p",null,y(e.end_time))),l.a.createElement("h5",{className:"thead-dark text-centered"},"CLIENT INFO"),l.a.createElement("section",{className:"card-client centered-children-per-row_container"},l.a.createElement("p",null,"CLIENT"),l.a.createElement("p",null,e.client.name),l.a.createElement("p",null,"PHONE"),l.a.createElement("p",null,e.client.phone),l.a.createElement("p",null,"EMAIL"),l.a.createElement("p",null,e.client.email),l.a.createElement("p",null,"ADDRESS"),l.a.createElement("p",null,e.client.address)))};return l.a.createElement("section",{className:"accordion-container"},l.a.createElement(K.a,null,l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showToday",className:"accordion-toggle_button gold-bg"},l.a.createElement("section",{className:"section-3-col"},l.a.createElement("section",null,"\u25bc"),l.a.createElement("section",null,"TODAY"),l.a.createElement("section",null,"\u25bc"))),l.a.createElement(K.a.Collapse,{eventKey:"showToday"},l.a.createElement("section",{className:"lightgold-bg margin-all-1rem padding-all-1rem "},s(t))))),l.a.createElement(K.a,null,l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showCalendarClick",className:"accordion-toggle_button blue-bg"},l.a.createElement("section",{className:"section-3-col"},l.a.createElement("section",null,"\u25bc"),l.a.createElement("section",null,S(n).toUpperCase()),l.a.createElement("section",null,"\u25bc"))),l.a.createElement(K.a.Collapse,{eventKey:"showCalendarClick"},l.a.createElement("section",{className:"lightblue-bg margin-all-1rem padding-all-1rem "},function(){var e=b(new Date),t=n<e;return a.length>0?l.a.createElement("section",null,t?l.a.createElement("h3",{className:"text-centered"},"Shift completed!"):null,s(a)):t?l.a.createElement("h3",{className:"text-centered"},"Nothing that day"):0===a.length&&!0===r?l.a.createElement("section",{className:"text-centered"},l.a.createElement("h3",null,"No shifts scheduled"),l.a.createElement("button",{onClick:function(){c(!1)},className:"btn btn-danger"},"Take the day off")):0===a.length&&!1===r?l.a.createElement("section",{className:"text-centered"},l.a.createElement("h3",null,"You have the day off"),l.a.createElement("button",{onClick:function(){c(!0)},className:"btn btn-success"},"I'm free to work")):void 0}())))))},ye=function(e){var t=e.empUnavails,a=e.empShifts,n=e.daySpotlight,r=e.shiftsToday,c=e.shiftsOfDay,s=e.availStatusOfDay,o=(e.unstaffedShifts,e.updateStateForCalendarDayCB),i=e.toggleAvailCallback,m=new Date;return l.a.createElement("section",null,l.a.createElement("section",{className:"calendar-container"},l.a.createElement(V.a,{tileContent:function(e){var n=e.date,r=e.view,c=" - ",s="",o=b(n);if(!function(e){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){if(a.value.day_off===e)return!0}}catch(l){n.e(l)}finally{n.f()}return!1}(o)?function(e){var t,n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){if(t.value.shift_date===e)return!0}}catch(l){n.e(l)}finally{n.f()}return!1}(o)&&(c="ON",s="tile-work"):(c="OFF",s="tile-unavail"),C(o)?(c=" x ",s="tile-past"):o===b(m)&&(c="TODAY",s="tile-today"),"month"===r)return l.a.createElement("section",{className:s},c)},onChange:o,value:g(n)})),l.a.createElement(ve,{toggleAvailCallback:i,shiftsToday:r,shiftsOfDaySpotlight:c,dateStr:n,availStatus:s}))},Se=function(e){var t=e.sortedUnavails,a=e.freeToWorkCallback;return l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered"},"UNAVAILABLE DAYS"),t.map((function(e){return l.a.createElement("section",{key:e.id,className:"employee-dash-unavails-table"},l.a.createElement("section",null,S(e.day_off)),l.a.createElement("button",{onClick:function(){a(e)},className:"btn btn-success margin-right-5rem"},"I'm free to work"))})))},Ne=function(e){var t=e.info,a=e.URL_endpoint,r=e.updateInfoCallback,c=JSON.parse(JSON.stringify(t)),s=Object(n.useState)(c),o=Object(_.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)([]),f=Object(_.a)(u,2),E=f[0],g=f[1],b=function(e){i[e.target.name]=e.target.value,m(i)},v=function(){var e=[];if(""!==i.name&&i.name||e.push("Name cannot be blank"),i.phone&&""!==i.phone)if(k(i.phone)){var t=w(i.phone);i.phone=t}else{var a=D(i.phone);a?i.phone=a:e.push("Phone number format invalid")}return i.email&&""!==i.email&&(T(i.email)||e.push("Email invalid")),g(e),0===e.length};return l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered margin-all-1rem"},"MY INFO"),l.a.createElement("form",null,l.a.createElement("fieldset",null,l.a.createElement("section",{className:"form-group margin-all-1rem"},l.a.createElement("label",null,"NAME: ",t.name),l.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:b,placeholder:"new name here"}),l.a.createElement("label",{className:"margin-top-1rem"},"ADDRESS: ",t.address),l.a.createElement("input",{type:"text",className:"form-control",name:"address",onChange:b,placeholder:"new address here"}),l.a.createElement("label",{className:"margin-top-1rem"},"PHONE: ",t.phone),l.a.createElement("input",{type:"text",className:"form-control",name:"phone",onChange:b,placeholder:"new phone here"}),l.a.createElement("label",{className:"margin-top-1rem"},"EMAIL: ",t.email),l.a.createElement("input",{type:"text",className:"form-control",name:"email",onChange:b,placeholder:"new email here"})),l.a.createElement("section",{className:"centered-children-per-row_container margin-all-1rem"},E===[]?null:function(e){var t=e.map((function(e,t){return l.a.createElement("li",{key:t,className:"centered-text"},e)}));return l.a.createElement("ul",{className:"centered-children-per-row_container"},t)}(E),l.a.createElement("button",{onClick:function(e){if(e.preventDefault(),v()){var t=p();d.a.put(a,i,{headers:t}).then(h.b.success("".concat(i.name," updated successfully")),r(i)).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))}},className:"btn btn-primary"},"UPDATE")))))},Ie=a(1),Ce=a.n(Ie),ke=function(e){for(var t=e.sortedOwnShifts,a=e.sortedUnstaffedShifts,n=e.sortedUnavails,r=e.takeShiftCallback,c=e.freeToWorkCallback,s=[],o=[],i=Object(be.a)(t);i[0];){if(!C(i[0].shift_date)){s=Object(be.a)(i);break}o.push(i.shift())}var m=function(e,t){return e.map((function(e){return l.a.createElement(K.a,{key:e.id},l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showInfo",className:"accordion-toggle_button ".concat(t)},l.a.createElement("section",{className:"section-4-col"},l.a.createElement("section",null,"\u25bc"),l.a.createElement("section",null,S(e.shift_date)),l.a.createElement("section",null,v(e.shift_date)),l.a.createElement("section",null,e.client.name))),l.a.createElement(K.a.Collapse,{eventKey:"showInfo"},l.a.createElement("section",null,d(e)))))}))},u=function(){return l.a.createElement("section",null,a.map((function(e){return l.a.createElement(K.a,{key:e.id},l.a.createElement("section",null,l.a.createElement(K.a.Toggle,{eventKey:"showInfo",className:C(e.shift_date)?"accordion-toggle_button gray-bg":"accordion-toggle_button lightblue-bg"},l.a.createElement("section",{className:"section-4-col"},l.a.createElement("section",null,"\u25bc"),l.a.createElement("section",null,S(e.shift_date)),l.a.createElement("section",null,v(e.shift_date)),l.a.createElement("section",null,e.client.name))),l.a.createElement(K.a.Collapse,{eventKey:"showInfo"},l.a.createElement("section",null,d(e,!0)))))})))},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.a.createElement("section",null,l.a.createElement("section",{className:C(e.shift_date)?"card-shift gray-bg":"card-shift lightblue-bg"},l.a.createElement("p",null,"DATE"),l.a.createElement("p",null,e.shift_date),l.a.createElement("p",null,"START"),l.a.createElement("p",null,y(e.start_time)),l.a.createElement("p",null,"END"),l.a.createElement("p",null,y(e.end_time))),l.a.createElement("section",{className:"card-client"},l.a.createElement("p",null,"CLIENT"),e.client?l.a.createElement("p",null,e.client.name):l.a.createElement("p",null),l.a.createElement("p",null,"PHONE"),e.client?l.a.createElement("p",null,e.client.phone):l.a.createElement("p",null),l.a.createElement("p",null,"EMAIL"),e.client?l.a.createElement("p",null,e.client.email):l.a.createElement("p",null),l.a.createElement("p",null,"ADDRESS"),e.client?l.a.createElement("p",null,e.client.address):l.a.createElement("p",null)),t?h(e):null)},h=function(e){var a=function(e){var a,n=Object(f.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.shift_date>e)return!1;if(l.shift_date===e)return!0}}catch(r){n.e(r)}finally{n.f()}}(e.shift_date),c=function(e){var t,a=Object(f.a)(n);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(l.day_off>e)return!1;if(l.day_off===e)return!0}}catch(r){a.e(r)}finally{a.f()}}(e.shift_date);return a||c?a?l.a.createElement("section",{className:"gray-bg text-centered margin-all-1rem"},l.a.createElement("p",{className:"padding-all-1rem"},"You are already working elsewhere that day!")):c?l.a.createElement("section",{className:"gray-bg text-centered margin-all-1rem"},l.a.createElement("p",{className:"padding-top-1rem"},"You have the day off but you can change your mind!"),l.a.createElement("button",{onClick:function(){E(e)},className:"btn btn-success margin-all-1rem"},"I can work")):void 0:l.a.createElement("section",{className:"lightblue-bg text-centered margin-all-1rem"},l.a.createElement("p",{className:"padding-top-1rem"},"You are eligible for this shift!"),l.a.createElement("button",{onClick:function(){r(e)},className:"btn btn-primary margin-all-1rem"},"Take the shift"))},E=function(e){var t=n.find((function(t){return t.day_off===e.shift_date}));c(t)};return t?l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered"},"MY SHIFTS"),m(s,"lightblue-bg"),l.a.createElement("h1",{className:"text-centered"},"AVAILABLE SHIFTS"),u(),l.a.createElement("h1",{className:"text-centered"},"PAST SHIFTS"),m(o,"gray-bg")):l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered"},"MY SHIFTS"),l.a.createElement("p",null,"Nothing yet..."),l.a.createElement("h1",{className:"text-centered"},"AVAILABLE SHIFTS"),u())};Z.propTypes={sortedOwnShifts:Ce.a.arrayOf(Ce.a.object),sortedUnstaffedShifts:Ce.a.arrayOf(Ce.a.object),sortedUnavails:Ce.a.arrayOf(Ce.a.object),takeShiftCallback:Ce.a.func.isRequired,freeToWorkCallback:Ce.a.func.isRequired};var Oe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).getEmpInfo=function(t){return d.a.get(e.state.EMP_DASH,{headers:t})},e.getEmpShifts=function(t){return d.a.get(e.state.EMP_DASH+"/shifts",{headers:t})},e.getEmpUnavails=function(t){return d.a.get(e.state.EMP_DASH+"/unavails",{headers:t})},e.getUnstaffedShifts=function(t){return d.a.get(e.state.EMP_DASH+"/unstaffedShifts",{headers:t})},e.setShowCategory=function(t){return e.setState({show:t})},e.showChosenCategory=function(){var t=e.state.show;return"calendar"===t?e.showCalendar():"shifts"===t?e.showAllShifts():"unavails"===t?e.showAllUnavails():"info"===t?e.showAllInfo():void 0},e.showAllInfo=function(){return l.a.createElement(Ne,{info:e.state.empInfo,URL_endpoint:e.state.EMP_DASH,updateInfoCallback:e.updateInfo})},e.showAllShifts=function(){var t=I(e.state.empShifts),a=N(e.state.empUnavails),n=I(e.state.unstaffedShifts).filter((function(e){var a=b(new Date);if(e.shift_date<a)return!1;var n,l=Object(f.a)(t);try{for(l.s();!(n=l.n()).done;){var r=n.value;if(e.shift_date===r.shift_date)return!1;if(e.shift_date<r.shift_date)break}}catch(c){l.e(c)}finally{l.f()}return!0}));return l.a.createElement(ke,{sortedOwnShifts:t,sortedUnstaffedShifts:n,sortedUnavails:a,freeToWorkCallback:e.freeToWork,takeShiftCallback:e.takeShift})},e.showAllUnavails=function(){var t=e.state.empUnavails,a=N(t);return 0===t.length?l.a.createElement("h3",{className:"text-centered margin-all-1rem"},"No upcoming unavailable days"):l.a.createElement("section",null,l.a.createElement(Se,{sortedUnavails:a,freeToWorkCallback:e.freeToWork}))},e.showCalendar=function(){return l.a.createElement(ye,{empUnavails:e.state.empUnavails,empShifts:e.state.empShifts,daySpotlight:e.state.daySpotlight,shiftsToday:e.state.shiftsToday,shiftsOfDay:e.state.shiftsOfDay,availStatusOfDay:e.state.availStatusOfDay,unstaffedShifts:e.state.unstaffedShifts,updateStateForCalendarDayCB:e.updateStateForCalendarDay,toggleAvailCallback:e.toggleAvail})},e.updateStateForCalendarDay=function(t){var a=b(t),n=e.state.empShifts.filter((function(e){return e.shift_date===a})),l=e.canTheyWorkThisDay(a,n,e.state.empUnavails);e.setState({daySpotlight:a,shiftsOfDay:n,availStatusOfDay:l})},e.canTheyWorkThisDay=function(e,t,a){if(t.length>0)return!1;var n,l=Object(f.a)(a);try{for(l.s();!(n=l.n()).done;){if(n.value.day_off===e)return!1}}catch(r){l.e(r)}finally{l.f()}return!0},e.freeToWork=function(t){var a=p();d.a.delete(e.state.EMP_DASH+"/unavails/".concat(t.id),{headers:a}).then((function(t){e.setState({empUnavails:t.data,availStatusOfDay:!0})})).catch((function(e){return h.b.error("ERROR deleting from db: ".concat(e.message))}))},e.toggleAvail=function(t){var a=Object(be.a)(e.state.empUnavails);if(t){var n=e.state.empUnavails.find((function(t){return t.day_off===e.state.daySpotlight}));e.freeToWork(n)}else{var l=p();d.a.post(e.state.EMP_DASH+"/unavails",{day_off:e.state.daySpotlight},{headers:l}).then((function(t){a.push(t.data),e.setState({empUnavails:a,availStatusOfDay:!1})})).catch((function(e){return h.b.error("ERROR adding from db: ".concat(e.message))}))}},e.takeShift=function(t){var a=e.state.EMP_DASH+"/shifts/".concat(t.id),n=p();d.a.put(a,null,{headers:n}).then((function(t){!function(e,t){if(e.length!==t.length)return!1;var a=L(e),n=L(t);return E.a.isEqual(a,n)}(e.state.empShifts,t.data)?(h.b.success("The shift is yours! Huzzah! \ud83e\udd73"),e.setState({empShifts:t.data})):h.b.error("UH OH! Shift was just taken by someone else \ud83d\ude15"),e.updateLatestUnstaffedShifts()})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))},e.updateLatestUnstaffedShifts=function(){var t=p();d.a.get(e.state.EMP_DASH+"/unstaffedShifts",{headers:t}).then((function(t){return e.setState({unstaffedShifts:t.data})})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))},e.updateInfo=function(t){e.setState({empInfo:t})};var n=b(new Date);return e.state={EMP_DASH:"http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/employees/"+sessionStorage.getItem("databaseId"),empInfo:[],empUnavails:[],empShifts:[],daySpotlight:n,shiftsToday:[],shiftsOfDay:[],availStatusOfDay:null,show:"calendar",unstaffedShifts:[]},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=p();d.a.all([this.getEmpInfo(t),this.getEmpShifts(t),this.getEmpUnavails(t),this.getUnstaffedShifts(t)]).then(d.a.spread((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var l=a[0].data,r=a[1].data,c=a[2].data,s=a[3].data,o=b(new Date),i=r.filter((function(e){return e.shift_date===o})),m=e.canTheyWorkThisDay(o,i,c);e.setState({empInfo:l,empShifts:r,empUnavails:c,shiftsToday:i,shiftsOfDay:i,availStatusOfDay:m,unstaffedShifts:s})}))).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))}},{key:"render",value:function(){var e=this;return"EMPLOYEE"!==this.props.authenticatedRole?l.a.createElement(ue,{message:"Please log in to see EMPLOYEE dashboard",icon:"lock"}):l.a.createElement("section",null,l.a.createElement(Q.a,{bg:"primary",variant:"dark",sticky:"top"},l.a.createElement(Q.a.Brand,{onClick:function(){return e.setShowCategory("calendar")}},"CALENDAR"),l.a.createElement(ee.a,{className:"mr-auto"},l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("shifts")}},"SHIFTS"),l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("unavails")}},"UNAVAILABLE DAYS"),l.a.createElement(ee.a.Link,{onClick:function(){return e.setShowCategory("info")}},"INFO"))),this.showChosenCategory())}}]),a}(l.a.Component),Ae=a(91),we=a.n(Ae),De=a(92),Te=a.n(De),Le=a(93),_e=a.n(Le);var Re=function(e){var t=e.icon,a=e.message;return l.a.createElement("section",null,l.a.createElement("h1",{className:"text-centered"},a),"hourglass"===t?l.a.createElement("img",{src:we.a,alt:"hourglass",className:"homepage-logo"}):"thumbsUp"===t?l.a.createElement("img",{src:Te.a,alt:"thumbs up",className:"homepage-logo"}):l.a.createElement("img",{src:_e.a,alt:"2 people interacting",className:"homepage-logo"}))};function xe(e){var t=e.match,a="".concat("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/text","/").concat(t.params.uuid),r=Object(n.useState)("LOADING"),c=Object(_.a)(r,2),s=c[0],o=c[1],i=p();if("LOADING"===s)return d.a.get(a,{headers:i}).then((function(e){return o(e.data)})),l.a.createElement(Re,{message:"Loading...",icon:"hourglass"});if(null===s||!1===s)return l.a.createElement(ue,{message:"Sorry, shift is taken",icon:"stopwatch"});if(!0===s)return l.a.createElement(Re,{message:"YAY YOU GOT IT!",icon:"thumbsUp"});var m=s;return l.a.createElement("section",{className:"homepage-section"},l.a.createElement("h1",{className:"text-centered"},"Please Confirm Below"),l.a.createElement("section",{className:"card-shift lightblue-bg"},l.a.createElement("p",null,"DATE"),l.a.createElement("p",null,m.shift_date),l.a.createElement("p",null,"START"),l.a.createElement("p",null,y(m.start_time)),l.a.createElement("p",null,"END"),l.a.createElement("p",null,y(m.end_time))),l.a.createElement("section",{className:"card-client"},l.a.createElement("p",null,"CLIENT"),l.a.createElement("p",null,m.client.name),l.a.createElement("p",null,"PHONE"),l.a.createElement("p",null,m.client.phone),l.a.createElement("p",null,"EMAIL"),l.a.createElement("p",null,m.client.email),l.a.createElement("p",null,"ADDRESS"),l.a.createElement("p",null,m.client.address)),l.a.createElement("section",{className:"text-centered"},l.a.createElement("button",{onClick:function(){d.a.post(a,{headers:i}).then((function(e){return o(e.data)})).catch((function(e){return h.b.error("ERROR: ".concat(e.message))}))},className:"btn btn-primary"},"YES, I WANT THIS SHIFT!"),l.a.createElement("li",{className:"fine-print"},"This shift will appear on your employee dashboard after you accept."),l.a.createElement("li",{className:"fine-print"},"Close this window if you want to cancel."),l.a.createElement("li",{className:"fine-print"},"Or login above to access your dashboard for other options.")))}var je=a(12),Ue=a(94),Me=a.n(Ue);function Pe(){return l.a.createElement("section",{className:"homepage-section text-centered"},l.a.createElement("img",{src:Me.a,alt:"2 people",className:"homepage-logo"}))}var Be=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).login=function(){var t=sessionStorage.getItem("googleId"),a=sessionStorage.getItem("googleAccessToken"),n={googleId:t,googleAccessToken:a,uuid:""},l=p();d.a.post("http://schedplusplusbackend.us-west-2.elasticbeanstalk.com/login",n,{headers:l}).then((function(a){0===Object.entries(a.data).length&&(sessionStorage.setItem("authenticatedRole","NEED UUID"),e.setState({authenticatedRole:"NEED UUID"}));var n=Object.keys(a.data)[0],l=Object.values(a.data)[0].name,r=Object.values(a.data)[0].id;sessionStorage.setItem("authenticatedRole",n),sessionStorage.setItem("username",l),sessionStorage.setItem("databaseId",r),e.setState({authenticatedRole:n,googleId:t,username:l,databaseId:r}),e.greetToast(l)})).catch((function(e){"NEED UUID"!==sessionStorage.getItem("authenticatedRole")&&h.b.error("LOGIN ERROR! ".concat(e.message))}))},e.demoLogin=function(t){sessionStorage.setItem("authenticatedRole",t),sessionStorage.setItem("username","demoUser"),sessionStorage.setItem("databaseId","demoDatabaseId"),e.setState({authenticatedRole:t,googleId:"demoGoogleId",username:"demoUser",databaseId:"demoDatabaseId"}),e.greetToast("demoUser")},e.greetToast=function(e){var t,a=(new Date).getHours();t=a<12?"Good morning":a<17?"Good afternoon":"Good evening",h.b.success("".concat(t,", ").concat(e," \ud83d\ude04"))},e.logout=function(){e.setState({authenticatedRole:"",googleId:"",username:"",databaseId:""}),h.b.success("Goodbye ".concat(sessionStorage.getItem("username")," \ud83d\udc4b")),sessionStorage.clear()},e.state={authenticatedRole:"",googleId:"",username:"",databaseId:""},sessionStorage.setItem("authenticatedRole",""),sessionStorage.setItem("googleId",""),sessionStorage.setItem("googleAccessToken",""),sessionStorage.setItem("username",""),sessionStorage.setItem("databaseId",""),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.authenticatedRole,t=this.state.username,a=this.state.googleId,n=this.state.databaseId;return l.a.createElement(P.a,null,l.a.createElement(B,{authenticatedRole:this.state.authenticatedRole,googleAuthCallback:this.login,demoLoginCallback:this.demoLogin,logoutCallback:this.logout}),"ADMIN"===e?l.a.createElement(je.a,{to:"/adminDash",component:function(){return l.a.createElement(Oe,{authenticatedRole:e,username:t,googleId:a,databaseId:n})}}):null,"EMPLOYEE"===e?l.a.createElement(je.a,{to:"/employeeDash",component:function(){return l.a.createElement(Oe,{authenticatedRole:e,username:t,googleId:a,databaseId:n})}}):null,l.a.createElement(je.d,null,l.a.createElement(je.b,{path:"/",exact:!0,component:Pe}),l.a.createElement(je.b,{path:"/adminDash",component:function(){return l.a.createElement(ge,{authenticatedRole:e,username:t,googleId:a,databaseId:n})}}),l.a.createElement(je.b,{path:"/employeeDash",exact:!0,component:function(){return l.a.createElement(Oe,{authenticatedRole:e,username:t,googleId:a,databaseId:n})}}),l.a.createElement(je.b,{path:"/text/:uuid",component:xe})),l.a.createElement(G,null),l.a.createElement(h.a,null))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,a){e.exports=a.p+"static/media/redCrossFlag.e167e2a7.svg"},81:function(e,t,a){e.exports=a.p+"static/media/SPPbanner2.596567f0.png"},86:function(e,t,a){e.exports=a.p+"static/media/alarmClock.9268d350.svg"},87:function(e,t,a){e.exports=a.p+"static/media/stopwatch.a3e987a1.svg"},88:function(e,t,a){e.exports=a.p+"static/media/warning.35659b9c.svg"},89:function(e,t,a){e.exports=a.p+"static/media/questionBubble.afa013ae.svg"},90:function(e,t,a){e.exports=a.p+"static/media/comboLock.c9894358.svg"},91:function(e,t,a){e.exports=a.p+"static/media/hourglass.9d9b9d62.svg"},92:function(e,t,a){e.exports=a.p+"static/media/thumbsUp.e134f0b5.svg"},93:function(e,t,a){e.exports=a.p+"static/media/twopeopleinteract.41c40a5f.svg"},94:function(e,t,a){e.exports=a.p+"static/media/twopeople.65b701d4.svg"},97:function(e,t,a){e.exports=a(146)}},[[97,1,2]]]);
//# sourceMappingURL=main.ec20c41d.chunk.js.map